<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StateFarm Client Loader</title>
</head>
<body>
    <h1>StateFarm Client - Plain JS Loader</h1>
    <p>This page loads Tweakpane and the StateFarm client without requiring a userscript manager.</p>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open Shell Shockers or any supported proxy site</li>
        <li>Open browser DevTools (F12)</li>
        <li>Copy the code from the "Console Injection" section below</li>
        <li>Paste it into the console and press Enter</li>
    </ol>

    <h2>Console Injection Code:</h2>
    <textarea id="injectionCode" rows="15" cols="80" readonly>
// Load Tweakpane first
(function() {
    if (typeof Tweakpane !== 'undefined') {
        console.log('Tweakpane already loaded');
        loadStateFarm();
        return;
    }
    
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/tweakpane@3.1.10/dist/tweakpane.min.js';
    script.onload = function() {
        console.log('Tweakpane loaded successfully');
        loadStateFarm();
    };
    script.onerror = function() {
        console.error('Failed to load Tweakpane');
    };
    document.head.appendChild(script);
    
    function loadStateFarm() {
        fetch('http://localhost:8080/statefarm.js') // Change this URL to where your script is hosted
            .then(r => r.text())
            .then(code => {
                eval(code);
                console.log('StateFarm Client loaded successfully!');
            })
            .catch(e => console.error('Failed to load StateFarm:', e));
    }
})();
    </textarea>
    <br>
    <button onclick="copyCode()">Copy Code</button>

    <h2>Bookmarklet (Alternative):</h2>
    <p>Drag this link to your bookmarks bar, then click it when on a Shell Shockers page:</p>
    <a href="javascript:(function(){if(typeof Tweakpane==='undefined'){var s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/tweakpane@3.1.10/dist/tweakpane.min.js';s.onload=function(){loadSF()};document.head.appendChild(s)}else{loadSF()}function loadSF(){fetch('http://localhost:8080/statefarm.js').then(r=>r.text()).then(c=>eval(c)).catch(e=>console.error(e))}})();" 
       style="background: #4CAF50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 10px 0;">
        StateFarm Loader
    </a>

    <h2>Self-Hosted Option:</h2>
    <p>To use without internet access or for better reliability:</p>
    <ol>
        <li>Download Tweakpane from CDN and save as <code>tweakpane.min.js</code></li>
        <li>Host both files on a local server (e.g., <code>python3 -m http.server 8080</code>)</li>
        <li>Update the URLs in the injection code above</li>
    </ol>

    <script>
        function copyCode() {
            const textarea = document.getElementById('injectionCode');
            textarea.select();
            document.execCommand('copy');
            alert('Code copied to clipboard!');
        }
    </script>

    <hr>
    <h2>Quick Test:</h2>
    <p>Load Tweakpane and StateFarm on this page (for testing only):</p>
    <button onclick="testLoad()">Test Load</button>
    <div id="status"></div>

    <script>
        function testLoad() {
            const status = document.getElementById('status');
            status.innerHTML = '<p>Loading Tweakpane...</p>';
            
            if (typeof Tweakpane !== 'undefined') {
                status.innerHTML += '<p style="color: green;">✓ Tweakpane already loaded</p>';
                loadStateFarmScript();
                return;
            }
            
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/tweakpane@3.1.10/dist/tweakpane.min.js';
            script.onload = function() {
                status.innerHTML += '<p style="color: green;">✓ Tweakpane loaded</p>';
                loadStateFarmScript();
            };
            script.onerror = function() {
                status.innerHTML += '<p style="color: red;">✗ Failed to load Tweakpane</p>';
            };
            document.head.appendChild(script);
        }
        
        function loadStateFarmScript() {
            const status = document.getElementById('status');
            status.innerHTML += '<p>Loading StateFarm...</p>';
            
            fetch('./statefarm.js')
                .then(r => r.text())
                .then(code => {
                    eval(code);
                    status.innerHTML += '<p style="color: green;">✓ StateFarm loaded successfully!</p>';
                })
                .catch(e => {
                    status.innerHTML += '<p style="color: red;">✗ Failed to load StateFarm: ' + e.message + '</p>';
                });
        }
    </script>
</body>
</html>
