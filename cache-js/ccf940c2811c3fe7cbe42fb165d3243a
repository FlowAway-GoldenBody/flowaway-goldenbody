/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/messages-conversation.mocker-Dtu_4tLT.js","assets/_plugin-vue_export-helper-CB4Ffj_H.js","assets/cookie-banner-CZUnWPWz.js","assets/index-wh6DItv2.js","assets/@chesscom-nyupcMS7.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/@chesscom-5VLViYDC.css","assets/@vue-Bs7Bvl8t.js","assets/axios-CwDF0ZIN.js","assets/vue-DEdtZKM-.js","assets/index-DtdxH1SU.css","assets/amplitude-js-enpvQuCl.js","assets/@amplitude-BlFjiWHL.js","assets/howler-Og53AvBs.js","assets/lodash.debounce-CFgJh3GH.js","assets/lottie-web-CSiffepE.js","assets/uuid-B4WmvF3e.js","assets/vue-router-n0zRxjS-.js","assets/string.util-D6juJEzu.js","assets/translation.util-FC72oqSg.js","assets/bazinga-translator-BoPVzKZ2.js","assets/organization.config-DetoyQdM.js","assets/assets.util-CsSK8dCS.js","assets/about-assets-Rd2eEObE.js","assets/account-assets-BPZj4Tek.js","assets/adults-assets-CRtwVSE_.js","assets/ambassadors-assets-D1W7r5s1.js","assets/analysis-assets-C5HNc3F7.js","assets/avatar-assets-CMaR_JqS.js","assets/enterprise-assets-3pvf_NfI.js","assets/error-assets-DZQ-MSLw.js","assets/events-assets-DbBoFSu9.js","assets/global-assets-DerxH6ON.js","assets/grants-assets-Dbo0bsmI.js","assets/groups-assets-BjWBOjKt.js","assets/home-assets-CLAAd_YA.js","assets/layout-assets-jgiWMCNV.js","assets/learn-assets-7Rfi0BEF.js","assets/play-assets-BdprFBqN.js","assets/puzzles-assets-CJXCD5GM.js","assets/resources-assets-CIs5RdVN.js","assets/ui-assets-CFoOgfwi.js","assets/upgrade-assets-SnPel__I.js","assets/user-assets-DYgfQR3j.js","assets/assets-DBpqtbmP.css","assets/use-element-size-wXXwgoL7.js","assets/@juggle-CWT-1nJ5.js","assets/ck-loading-dots-CvDa45rI.js","assets/ck-loading-dots-CrWnhmU8.css","assets/use-responsive-D6POjA4K.js","assets/ck-icon-Bc0lOl-n.js","assets/ck-icon--BR0n9SZ.css","assets/cookie-banner-Dfu6acc5.css","assets/tiny-emitter-BqG9BmW2.js","assets/languages.config-uK-KRvVB.js","assets/flags-DWkNDnqa.js","assets/use-storage-DB87HpNx.js","assets/event-bus-factory.util-CrsaEADd.js","assets/user.mocker-DJNtCufv.js","assets/country.mocker-DACcu__U.js","assets/random.util-FSayF0pK.js","assets/id.mocker-y8h1c7TP.js","assets/username.mocker-B0Y6SpQR.js","assets/person-surname.mocker-BfFzf1yI.js","assets/chess-title.mocker-D6P5wkGC.js","assets/membership-level.mocker-Cg10GyFA.js","assets/user-avatar.mocker-B-ouWHso.js","assets/user-level.mocker-d9ygvIuh.js","assets/user-level-piece.mocker-BCuvj04t.js","assets/messages-conversations.mocker-M-L8xXTs.js","assets/paginated-list.mocker-CmjuGGl-.js","assets/text.mocker-D6kssZ-E.js"])))=>i.map(i=> __get$(d,i) );
import{A as e,k as t}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/@chesscom-nyupcMS7.js" ;import{at as n,g as r}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/@vue-Bs7Bvl8t.js" ;import{t as i}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/vue-DEdtZKM-.js" ;import{n as a,t as o}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/index-wh6DItv2.js" ;import{t as s}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/translation.util-FC72oqSg.js" ;import{O as c,gn as l,vn as u,wn as d}from "https://beside-powerful-above-recordings.trycloudflare.com:443/d0f884c05d30463bb609a6cb6160f74f!s!utf-8/https://www.chesskid.com/js/client-prod/assets/cookie-banner-CZUnWPWz.js" ;function f(e){if(Array.isArray(e.data))return[];return e.data.message.map(e=>e.type===`trophy`?t(e):e);function t(e){let t=new DOMParser().parseFromString(e.body,`text/html`),n=t.getElementById(`message-img`),r=t.querySelector(`.flex p:nth-child(1)`)?.innerText,i=t.querySelector(`.flex p:nth-child(2)`)?.innerText,a=t.querySelector(`.flex p:nth-child(3)`)?.innerText;return{...e,name:r,description:i,messageText:a,imgUrl:n?.src}}}e();const p=l({serverRoute:`callback_members_messages`,wrapper:f,mocker:async()=>(await t(async()=>{ let _hh$temp0=await import(__get$ProxyUrl(`./guardian-messages-response.mocker-ByDtduy0.js`,"https://www.chesskid.com/js/client-prod/assets/")),e=_hh$temp0.mockGuardianMessagesResponse; return{mockGuardianMessagesResponse:e}},[])).mockGuardianMessagesResponse()}),m=l({serverRoute:`api_v2_messages_conversation`,urlOptions:e=>({routeParams:{userId:e?.userId},queryParams:{page:e?.page}}),mocker:async()=>(await t(async()=>{ let _hh$temp1=await import(__get$ProxyUrl(`./messages-conversation.mocker-Dtu_4tLT.js`,"https://www.chesskid.com/js/client-prod/assets/")),e=_hh$temp1.mockMessagesConversation; return{mockMessagesConversation:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68]))).mockMessagesConversation()}),h=l({serverRoute:`api_v1_messages_inbox`,urlOptions:e=>({queryParams:{offset:e?.offset,html:e?.html}}),mocker:async()=>(await t(async()=>{ let _hh$temp2=await import(__get$ProxyUrl(`./messages-conversations.mocker-M-L8xXTs.js`,"https://www.chesskid.com/js/client-prod/assets/")),e=_hh$temp2.mockMessagesConversations; return{mockMessagesConversations:e}},__vite__mapDeps([69,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,70,71]))).mockMessagesConversations()}),g=u({serverRoute:`api_v1_messages_read_conversations`,data:e=>({userIds:e})}),_=u({serverRoute:`api_v1_messages_delete_conversations`,data:e=>({userIds:e})}),v=u({serverRoute:`api_v1_messages_send`,data: _hh$temp3=>{var e=_hh$temp3.userId,t=_hh$temp3.message;return{user:e,message:t};} ,errorMessage(e){switch(e){case`vulgar`:return s(`i18n_translation.please_watch_your_language_account_may_be_closed_text`);case`empty`:return s(`i18n_translation.message_is_required`)}}}),y=l({serverRoute:`callback_user_new_message_count`,mocker:async()=>(await t(async()=>{ let _hh$temp4=await import(__get$ProxyUrl(`./new-message-count.mocker-Dxs61sZN.js`,"https://www.chesskid.com/js/client-prod/assets/")),e=_hh$temp4.mockNewMessageCount; return{mockNewMessageCount:e}},[])).mockNewMessageCount()}),b=8e4;o(),i(); var _hh$temp5=a(),x=_hh$temp5.state,S=_hh$temp5.getters,C,w=n({conversation:{user:c(),messages:{items:[],hasMore:!1,totalCount:0},isReplyable:!1,previousConversationId:null,nextConversationId:null,page:1},inbox:{count:0,conversations:{items:[],hasMore:!1},messageableUsers:[],isFetching:!1},guardianMessages:[],newMessageCount:x.notifications.newMessagesCount,errorMessage:``}); const T=d({state:w,getters:n({canLoadMore:r(()=>w.inbox.conversations.items.length<15)}),actions:{initialize:E,destroy:D,deleteConversation:O,loadMoreConversation:A,readConversation:j,deleteConversations:M,fetchConversations:N,fetchGuardianMessages:k,loadMoreConversations:P,readConversations:F,resetErrorMessage:L,sendMessage:I,updateNewMessageCount:R,destroyConversation:z}});function E(){S.isAuthenticated&&B()}function D(){clearInterval(C)}async function O(e){await _([e])}async function k(){let e=await p();await R(),e.success&&e.data&&(w.guardianMessages=e.data)}async function A(e){let t=await m({userId:e??w.conversation.user.id,page:w.conversation.page++});t.success&&t.data&&(w.conversation.user=t.data.user,w.conversation.messages.items=[...t.data.messages.items,...w.conversation.messages.items],w.conversation.messages.hasMore=t.data.messages.hasMore,w.conversation.nextConversationId=t.data.nextConversationId,w.conversation.previousConversationId=t.data.previousConversationId,w.conversation.isReplyable=t.data.isReplyable,w.conversation.messages.totalCount=t.data.messages.totalCount)}async function j(e){await g([e]),await R()}async function M(e){await _(e),w.inbox.conversations.items=w.inbox.conversations.items.filter(t=>!e.includes(t.otherUser.id))}async function N(){w.inbox.isFetching=!0;let e=await h({offset:0,html:!0});await R(),w.inbox.isFetching=!1,e.success&&e.data&&(w.inbox.count=e.data.count,w.inbox.messageableUsers=e.data.messageableUsers,w.inbox.conversations.items=e.data.conversations.items,w.inbox.conversations.hasMore=e.data.conversations.hasMore)}async function P(){w.inbox.isFetching=!0;let e=await h({offset:w.inbox.conversations.items.length,html:!0});w.inbox.isFetching=!1,e.success&&e.data&&(w.inbox.count=e.data.count,w.inbox.conversations.items=[...w.inbox.conversations.items,...e.data.conversations.items],w.inbox.conversations.hasMore=e.data.conversations.hasMore)}async function F(e){await g(e),await R(),w.inbox.conversations.items.forEach(t=>{e.includes(t.otherUser.id)&&(t.isRead=!0)})}async function I(e,t){let n=await v({userId:e,message:t});n.errors?w.errorMessage=n.errors?.[0].message:w.conversation.user.id===e&&x.authUser&&(w.conversation.messages.items.push({subject:null,body:t,sendDate:Math.floor(Date.now()/1e3),hasDiagram:!1,senderId:x.authUser.user.id}),w.conversation.messages.totalCount=(w.conversation.messages.totalCount??0)+1)}function L(){w.errorMessage=``}async function R(){let e=await y();e.success&&e.data!==void 0&&(w.newMessageCount=e.data)}function z(){w.conversation.messages.items=[],w.conversation.messages.hasMore=!1,w.conversation.page=1}function B(){C=window.setInterval(R,90*1e3)}export{b as n,T as t};
/*hammerhead|script|end*/