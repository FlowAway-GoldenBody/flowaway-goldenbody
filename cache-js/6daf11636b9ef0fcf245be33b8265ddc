/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
(function(){"use strict";const pt=(e,t,n)=>"".concat(e," - ").concat(t),b=(e,t,n)=>{var r;const i=pt(e,t);return(r=performance==null?void 0:performance.mark)==null||r.call(performance,i),i},ue=e=>{console.debug(e)},g=(e,t)=>{console.error(e,JSON.stringify(t)),me("ERROR",e,pe(e,t))},he=(e,t)=>{console.error(e,JSON.stringify(t)),me("FATAL",e,pe(e,t))},me=(e,t,n)=>{var i;(i=window.ueLogError)==null||i.call(window,n,{logLevel:e,attribution:"APE-safeframe",message:t+" | "})},pe=(e,t)=>t instanceof Error?t:t?new Error(t):new Error(e);function gt(e,t,n){var i={},r=i.noTrailing,s=r===void 0?!1:r,o=i.noLeading,a=o===void 0?!1:o,c=i.debounceMode,d=c===void 0?void 0:c,l,m=!1,k=0;function x(){l&&clearTimeout(l)}function de(K){var q=K||{},v=q.upcomingOnly,le=v===void 0?!1:v;x(),m=!le}function ut(){for(var K=arguments.length,q=new Array(K),v=0;v<K;v++) __set$(q,v,__get$(arguments,v)) ;var le=this,ht=Date.now()-k;if(m)return;function Q(){k=Date.now(),t.apply(le,q)}function mt(){l=void 0}!a&&d&&!l&&Q(),x(),d===void 0&&ht>e?a?(k=Date.now(),s||(l=setTimeout(d?mt:Q,e))):Q():s!==!0&&(l=setTimeout(d?mt:Q,d===void 0?e-ht:e))}return ut.cancel=de,ut}const ge=()=>window.innerHeight||document.documentElement.clientHeight,Et=()=>window.innerWidth||document.documentElement.clientWidth,wt=e=>e.getBoundingClientRect().top-ge(),ft=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),bt=e=>{const t=e.getBoundingClientRect();return ft(t,Number(window.getComputedStyle(e,null).zIndex))},yt=e=>{const t=It(e);return t==null?"unknown":t>=.5},vt=e=>e.width===0&&e.height===0;function It(e){const t=document.body.getBoundingClientRect();if(vt(t))return null;const n=bt(e),i=ge(),r=Et(),s=Math.max(0,Math.min(t.left+r,n.r)-n.l),o=Math.max(0,Math.min(t.top+i,n.b)-n.t),a=s*o/(n.h*Math.min(n.w,r));return Number(Math.min(1,Math.max(0,a)).toFixed(2))}const Pt=(e,t,n)=>{let i=!1;const r=()=>{const a=wt(n);return a&&a<=t},s=()=>{r()&&(e(),i=!0)},o=gt(20,()=>{s(),i&&(window.removeEventListener("scroll",o),window.removeEventListener("resize",o))});s(),i||(window.addEventListener("scroll",o),window.addEventListener("resize",o))},Tt=( _hh$temp0 )=>{ var e=_hh$temp0.callback,t=_hh$temp0.errorCallback,n=_hh$temp0.delayConfig,i=_hh$temp0.placementDiv,r=_hh$temp0.siteName; const s=()=>{try{e()}catch(o){g("delayLoad failed",o),t==null||t()}};if(n!=null&&n.trim().match(/^\d{1,4}px$/g))Pt(s,parseInt(n,10),i);else if(n==="inView"&&r==="amazon.in"){const o=new IntersectionObserver(a=>{for(const c of a)if(c.intersectionRatio>0){s(),o.unobserve(i);break}},{threshold:[0,.01]});o.observe(i)}else s()},O=e=>{if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(t){g("Error with 'setEntity' CSA",t)}},w=(e,t,n=1)=>{if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:n},{ent:"all"})}catch(i){g("Error with 'logCsaEvent' CSA",i)}},L=(e,t=1)=>{if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(n){g("Error with 'incrementCounter' CSA",n)}},N=e=> __call$(e,"replace",[/_/g,":"]) ,S=(e,t,n)=>{_t()&&(Ee(we(e,t.id,n)),Ee(we(e,N(t.name),n)))},_t=()=>{var e;return typeof((e=window==null?void 0:window.ue)==null?void 0:e.tag)=="function"},Ee=e=>{var t;return(t=window==null?void 0:window.ue)==null?void 0:t.tag(e)},we=(e,t,n)=>"".concat(e,":").concat(t).concat(Lt(n)),Lt=e=>e?":".concat(e):"",St=(e,t)=>{S("adrender",e),S("adrender:lightad",e),t.adCreativeMetaData.adCreativeId&&(S("adrender",e,"creativeid:".concat(t.adCreativeMetaData.adCreativeId)),O({creativeId:t.adCreativeMetaData.adCreativeId.toString()})),t.adCreativeMetaData.adProgramId&&(S("adrender",e,"programid:".concat(t.adCreativeMetaData.adProgramId)),O({programId:t.adCreativeMetaData.adProgramId.toString()})),typeof t.isCardsFlow<"u"&&O({isCardsFlow:t.isCardsFlow.toString()});const n=At(t);S("adrender",e,"creativetemplatename:".concat(n)),O({adrender:"true",creativeTemplateName:n,isLightAds:"true"})},At=e=>e.adCreativeMetaData.adCreativeTemplateName? __call$(e.adCreativeMetaData.adCreativeTemplateName.toLowerCase(),"replace",[/[^0-9a-z]/g,""]) :"unknown",I=(e,t)=>{const n=()=>{var i,r;return(r=(i=e==null?void 0:e.renderingWeblabs)==null?void 0: __get$(i,t) )==null?void 0:r.toLowerCase()};return{isT1(){return n()==="t1"},isT2(){return n()==="t2"},getTreatment(){return n()}}},Ct=()=>I(window,"ADPT_SF_LOW_RATE_METRIC_LOGGING_1256362"),fe=()=>I(window,"ADPT_SF_SERVER_SIDE_SPONSORED_LABEL_998980"),Rt=()=>I(window,"APM_STORES_JPS_JRS_SAFEFRAME_VIEW_RATE_EXPERIMENT_1289633"),kt=()=>I(window,"APM_STORES_JPS_JRS_SAFEFRAME_NEW_VIEWABILITY_TRACKER_1354300"),xt=()=>I(window,"APM_STORES_JPS_JRS_SAFEFRAME_LIGHT_ADS_EVERYWHERE_1362485"),Ot=()=>I(window,"APM_STORES_JPS_JRS_SAFEFRAME_SL_ON_DOSSIER_1362947"),Nt="LightAdImpression",be=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),Mt=be("bodyBegin","bb",Nt),Bt=be("loaded","ld"),Dt=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,X=new Map,ye=()=>{if(!X.has( __get$(__get$(window,"location"),"href") )){const e=Dt.exec( __get$(__get$(window,"location"),"href") ),t=e&&e[3]?e[3]:null;X.set( __get$(__get$(window,"location"),"href") ,t)}return X.get( __get$(__get$(window,"location"),"href") )},ve=e=>{const t=ye();if(!e||!t)return null;const n=e.split(":");return n.splice(n.length-1,0,t),n.join(":")},Ie=e=>{const t=ye();return t?"".concat(e,":").concat(t):null},p=(e,t,n=1)=>{if(!Pe())return;const i=(r,s,o)=>{s&&Te("".concat(Le(r),":").concat(s),o)};i(e,t.id,n),i(e,Ie(t.id),n),i(e,N(t.name),n),i(e,ve(N(t.name)),n)},u=(e,t=1)=>{Pe()&&Te(Le(e),t)},Pe=()=>{var e;return typeof((e=window==null?void 0:window.ue)==null?void 0:e.count)=="function"},Te=(e,t)=>{var n;return(n=window==null?void 0:window.ue)==null?void 0:n.count(e,t)},_e="adplacements",Le=e=>e.startsWith(_e)?e:"".concat(_e,":").concat(e),Vt=(e,t,n)=>{if(window.csa)try{window.csa("Content",{element:e})("mark",t,n==null?void 0:n.getTime())}catch(i){g("Error with 'mark' CSA",i)}},Se={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},Ft=( _hh$temp1 )=>{ var e=_hh$temp1.latencyEvent,t=_hh$temp1.scope,n=_hh$temp1.placement,i=_hh$temp1.timestamp; var r,s;Ht(e)&&(M(e,B(t),n.id,i),M(e,B(t),N(n.name),i),M(e,B(t),(r=ve(n.name))!=null?r:void 0,i),M(e,B(t),(s=Ie(n.id))!=null?s:void 0,i))},Ht=e=>typeof  __get$(window,__get$(Se,e)) =="function",M=(e,t,n,i=new Date)=>{const r= __get$(Se,e) ;!n||typeof  __get$(window,r) !="function"|| __call$(window,r,[e,t+n,{wb:1},i]) },B=e=>"adplacements:"+$t(e),$t=e=>e?"".concat(e,":"):"";class Ut{sendLatencyMetric( _hh$temp2 ){ var t=_hh$temp2.latencyMetricType,n=_hh$temp2.placementId,i=_hh$temp2.placementName,r=_hh$temp2.placementDivId,s=_hh$temp2.timestamp; Ft({latencyEvent:t.csmKey,scope:t.csmMessage,placement:{id:n,name:i},timestamp:s}),Vt(document.getElementById(r),t.csaKey,s)}}const Wt=()=>new Ut;class z{constructor(t,n,i,r=!1){this.csaMetricName=t,this.csmMetricName=n,this.placement=i,this.shouldFireSlotAgnosticMetric=r}publishCount(){p(this.csmMetricName,this.placement),w(this.csaMetricName,this.placement),this.shouldFireSlotAgnosticMetric&&(u(this.csmMetricName),L(this.csaMetricName))}}class Ae{constructor(t,n){this.latencyMetricType=t,this.placement=n}publishLatency(t){Wt().sendLatencyMetric({latencyMetricType:this.latencyMetricType,placementId:this.placement.id,placementName:this.placement.name,placementDivId:this.placement.divId,timestamp:new Date(t!=null?t:performance.now())})}}const Jt=e=>new Ae(Mt,e),Yt=e=>new Ae(Bt,e),R=class R{};R.start=t=>new z("adload_start","adload:start",t,!0),R.renderError=t=>new z("adload_rendererror","adload:rendererror",t),R.callback=t=>new z("adload_delayloadcallback","adload:delayloadcallback",t);let T=R;const Gt=e=>zt(e),Kt=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/,Ce=e=>Kt.test(e),qt=e=>Ce(e)?Gt(e):e,Qt=e=>Ce(e)?e:Xt(e),Xt=e=>btoa(unescape(encodeURIComponent(e))),zt=e=>decodeURIComponent(escape(atob(e))),jt=e=>e&&e.split("&c=${AAX_PAYLOAD}").join(""),Re=e=>e+"_Feedback",ke=0,xe=1;let Zt=class{constructor(t,n,i,r,s,o,a){this.parentHtmlId=t,this.feedbackStyle=n,this.labelText=i,this.labelStyle=r,this.position=s,this.urlPathAndParameter=o,this.hidden=a}async addSponsoredLabelWithFeedbackLink(t,n){t.appendChildTo(this.parentHtmlId,this);const i=await n.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);if(!(i!=null&&i.isOk()))throw new Error("Result from the feedback service was not ok ".concat(this.urlPathAndParameter));t.updateElement(this.getHtmlId(),i)}getHtmlId(){return Re(this.parentHtmlId)}isHidden(){return this.hidden}exists(t){return t.exists(this.getHtmlId())}getFeedbackSpanElement(){return document.querySelector("#".concat(this.getHtmlId()," span"))}};class en{constructor(t){this.parentHtmlId=t}open(t){t.clickChildLink(this)}getHtmlId(){return Re(this.parentHtmlId)}}class tn{constructor(t,n){this.feedbackHtmlPort=t,this.feedbackApiPort=n}async createSponsoredLabelWithFeedbackLink(t,n){if(!t.exists(this.feedbackHtmlPort)){n.request();try{await t.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort),n.success(),t.isHidden()||n.labelRenderedHost()}catch(i){throw n.error(),i}}}openModal(t){t.open(this.feedbackHtmlPort)}labelRendered(t){t.labelRenderedCreative()}logTransparencyInfoMissing(t){t.transparencyInfoMissing()}}const j=e=>new nn(e),A={REQUEST:"adfeedback_request",SUCCESS:"adfeedback_success",ERROR:"adfeedback_error",LABEL_RENDERED_CREATIVE:"adfeedback_sponsoredlabelrendered_creative",LABEL_RENDERED_HOST:"adfeedback_sponsoredlabelrendered_host"},E={REQUEST:"adfeedback:request",SUCCESS:"adfeedback:success",ERROR:"adfeedback:error",LABEL_RENDERED_CREATIVE:"adfeedback:sponsoredlabelrendered:creative",LABEL_RENDERED_HOST:"adfeedback:sponsoredlabelrendered:host",LABEL_RENDERED:"adfeedback:sponsoredlabelrendered",TRANSPARENCY_INFO_MISSING:"adfeedback:transparencyinfo:missing"};class nn{constructor(t){this.placement=t}request(){p(E.REQUEST,this.placement),u(E.REQUEST),w(A.REQUEST,this.placement)}success(){p(E.SUCCESS,this.placement),u(E.SUCCESS),w(A.SUCCESS,this.placement)}error(){p(E.ERROR,this.placement),w(A.ERROR,this.placement)}labelRenderedCreative(){p(E.LABEL_RENDERED_CREATIVE,this.placement),u(E.LABEL_RENDERED),w(A.LABEL_RENDERED_CREATIVE,this.placement)}labelRenderedHost(){p(E.LABEL_RENDERED_HOST,this.placement),u(E.LABEL_RENDERED),w(A.LABEL_RENDERED_HOST,this.placement)}transparencyInfoMissing(){p(E.TRANSPARENCY_INFO_MISSING,this.placement),u(E.TRANSPARENCY_INFO_MISSING)}}class rn{constructor(t,n,i){this.status=t,this.html=n,this.script=i}isOk(){return this.status==="ok"}}class sn{constructor(t){this.windowRepo=t}async getSponsoredLabelAndFeedbackLink(t){const n=await window.fetch(this.windowRepo.origin()+t);if(n.ok){const i=await n.json();return new rn(i.status,i.html,i.script)}throw Error("Could not fetch the feedback html/link/script/label")}}class on{appendChildTo(t,n){var r,s;n.position===xe?(r=document.getElementById(t))==null||r.prepend(i(t,n)):n.position===ke&&((s=document.getElementById(t))==null||s.append(i(t,n)));function i(o,a){const c=document.createElement("div");return c.setAttribute("id",a.getHtmlId()),c.classList.add("ape-feedback"),c.style.position="relative",c.style.height="auto",c.style.minHeight="20px",c.style.textAlign=c.id.includes("hero-quick-promo_Desktop_placement_Feedback")?"left":"right",c.style.padding="0",c.style.marginTop="2px",c.style.display=a.feedbackStyle.display,o.endsWith("_wrapper")&&(!o.includes("-ilm")&&(c.style.maxWidth="min(100vh, 100vw)"),c.style.marginLeft="auto",c.style.marginRight="auto",c.style.padding="0 5px"),c.append(d(a)),c;function d(l){const m=document.createElement("div");return m.innerHTML=l.labelText,an(m,l.labelStyle),m}}}updateElement(t,n){const i=document.getElementById(t);if(i){i.innerHTML=n.html,cn(i,n);for(const r of i.children)r.tagName==="DIV"?r.removeAttribute("style"):r.tagName==="A"&&(r.style.removeProperty("position"),r.style.removeProperty("top"),r.style.removeProperty("right"),r.style.removeProperty("display"))}}clickChildLink(t){const n=document.getElementById(t.getHtmlId());for(const r of(n==null?void 0:n.children)||[])if(i(r)){r.click();return}function i(r){return r.tagName==="A"||r.tagName==="DIV"}}exists(t){return!!document.getElementById(t)}}const an=(e,t)=>{for(const n in t)e.style.setProperty(n, __get$(t,n) )},cn=(e,t)=>{const n=dn(e);n.innerHTML=t.script},dn=e=>{const t=document.createElement("script");return e.prepend(t),t},ln={hostname:"www.amazon.com.be"},un={hostname:"www.amazon.fr"},hn={hostname:"www.amazon.de"},mn={hostname:"www.amazon.it"},pn={hostname:"www.amazon.nl"},gn={hostname:"www.amazon.pl"},En={hostname:"www.amazon.es"},wn={hostname:"www.amazon.se"},f=e=> __get$Loc(location) .hostname===e.hostname,fn=()=>f(ln)||f(un)||f(hn)||f(mn)||f(pn)||f(gn)||f(En)||f(wn),bn=e=>!fn()||yn(e),yn=e=>{var i,r,s,o,a,c;const t=[];Z((s=(r=(i=e==null?void 0:e.url)==null?void 0:i.parameters)==null?void 0:r.adPlacementMetaData)==null?void 0:s.slotName)&&t.push("DSA Error: slotName missing");const n=(c=(a=(o=e==null?void 0:e.url)==null?void 0:o.parameters)==null?void 0:a.adCreativeMetaData)==null?void 0:c.adCreativeDetails;(!n||n.length<=0)&&t.push("DSA Error: transparency info missing"),n==null||n.every(d=>vn(d,t));for(const d of t)g(d);return t.length<=0},vn=(e,t)=>{var n,i,r,s,o;e.version||t.push("DSA Error: version missing"),Z(e.advertiserIdNS)&&t.push("DSA Error: advertiserIdNS missing"),(((n=e.selectionSignals)==null?void 0:n.context)===void 0||((i=e.selectionSignals)==null?void 0:i.context)===null)&&t.push("DSA Error: selectionSignals.context missing"),(((r=e.selectionSignals)==null?void 0: __get$(r,"location") )===void 0||((s=e.selectionSignals)==null?void 0: __get$(s,"location") )===null)&&t.push("DSA Error: selectionSignals.location missing"),Z((o=e.selectionSignals)==null?void 0:o.pastActivity)&&t.push("DSA Error: selectionSignals.pastActivity missing")},Z=e=>!(e!=null&&e.trim()),ee=()=>{return new In(e());function e(){return  new tn(new on(),new sn({origin:()=>__get$(window,"location").origin})) }};class In{constructor(t){this.feedbackService=t}async addSponsoredLabel( _hh$temp3 ){ var t=_hh$temp3.parentHtmlId,n=_hh$temp3.placement,i=_hh$temp3.feedback; return bn(i)?(i.hidden&&( __call$(Object,"assign",[i.style,{display:"none"}]) , __call$(Object,"assign",[i.label.style,{display:"none"}]) ),await this.feedbackService.createSponsoredLabelWithFeedbackLink(Tn(t,i),j(n)),!0):(this.feedbackService.logTransparencyInfoMissing(j(n)),g("Transparency Information missing"),!1)}openModal(t){this.feedbackService.openModal(new en(t))}labelRendered( _hh$temp4 ){ var t=_hh$temp4.placement; this.feedbackService.labelRendered(j(t))}}const Pn=e=>"/af/feedback-link?pl="+e,Tn=(e,t)=>{const n=JSON.parse(JSON.stringify(t.url.parameters));return n.adPlacementMetaData.pageUrl=Qt(n.adPlacementMetaData.pageUrl),new Zt(e,t.style,t.label.text,t.label.style,t.position==="TOP"?xe:ke,Pn(encodeURIComponent(JSON.stringify(n))),t.hidden)},_n=()=>{const e=new Map;return{onReady:(t,n)=>{const i=e.get(t)||[];i.push(n),e.set(t,i)},notifyReady:t=>{const n=e.get(t);n&&(n.forEach(i=>i()),e.delete(t))}}},Ln=e=>{e.lightAds||(e.lightAds={})},Oe=_n(),Ne=e=>"la-entity-ready-".concat(e),D=(e=window)=>(Ln(e),{get:t=>{const n= __get$(e.lightAds,t.id) ;return n?Promise.resolve(n): new Promise(i=>{Oe.onReady(Ne(t.id),()=>{i(__get$(e.lightAds,t.id));});}) },save:t=>{const n=t.placement.div.id; __set$(e.lightAds,n,t) ,Oe.notifyReady(Ne(n))}});class Me{async labelRendered(t){try{const n=await Sn(t);ee().labelRendered({placement:{id:n.placementId,name:n.placementName}})}catch(n){g("Light ad - labelRendered failed for '".concat(De(t),"'"),n)}}openModal(t){try{const n=Be(t).parentElement;ee().openModal(n.id)}catch(n){g("Light ad - openModal failed for '".concat(De(t),"'"),n)}}}const Sn=async e=>{const t=Be(e);return(await D().get(t)).lightAdDetails},Be=e=>{const t=document.getElementById(e);if(!t)throw new Error("Element '".concat(e,"' doesn't exist"));if(t.classList.contains("ape-placement"))return t;const n=t.closest(".ape-placement");if(!n)throw new Error("No placement div found for element '".concat(e,"'"));return n},De=e=> __call$(e,"replace",[/[\r\n]/g,""]) ,Ve=new Me,An=e=>{Rn(e),b("perf:la","markLightAdProcessed"),Cn(e)},Cn=async( _hh$temp5 )=>{ var e=_hh$temp5.placement,t=_hh$temp5.feedback,n=_hh$temp5.lightAdDetails; b("perf:la","processLightAdHelper");try{St(e,n),b("perf:la","addLightAdTags"),T.start(e).publishCount(),Jt(e).publishLatency(),b("perf:la","bodyBeginLightAd");const i=fe().isT1()?null:t.addSponsoredLabel();T.callback(e).publishCount();const r=e.render();if(Tt({callback:async()=>{e.firePreRenderImpression(),await r,b("perf:la","renderComplete"),e.track()},delayConfig:n.firePixelsAfter,placementDiv:e.div,siteName:n.siteName}),!fe().isT1()&&!await i){T.renderError(e).publishCount(),await e.collapse();return}Ot().isT1()||kn(n.adUnitPlacementId)}catch(i){T.renderError(e).publishCount(),await e.collapse(),g("Unable to process Light Ad",i)}},Rn=( _hh$temp6 )=>{ var e=_hh$temp6.placement,t=_hh$temp6.lightAdDetails; D().save({processedTimestamp:performance.now(),placement:e,lightAdDetails:t})},kn=e=>{const t=document.querySelector('[data-slot-name="psc-carousel-mobile-container"] button#psc-carousel-mobile-container-sponsored-button');t&&(Ve.labelRendered(e),t.onclick=null,t.addEventListener("click",()=>{Ve.openModal(e)}))};class xn{constructor(t,n,i,r,s,o){this.placement=t,this.position=n,this.hidden=i,this.style=r,this.label=s,this.url=o,this.addSponsoredLabel=async()=>{const a=this.createFeedbackRequestDTO();return ee().addSponsoredLabel(a)}}createFeedbackRequestDTO(){return{parentHtmlId:this.placement.parentDiv.id,placement:this.placement,feedback:{position:this.position,hidden:this.hidden,style:this.style,label:this.label,url:this.url}}}}const On=(e,t)=>{var n,i;return new xn(e,"BOTTOM",!t.adFeedbackInfo.boolFeedback,(n=t.adFeedbackInfo.feedbackDivStyle)!=null?n:{},{text:qt(t.adFeedbackInfo.sponsoredText),style:(i=t.adFeedbackInfo.fallbackTextStyle)!=null?i:{}},{parameters:{adPlacementMetaData:t.adPlacementMetaData,adCreativeMetaData:t.adCreativeMetaData}})},Nn="aUAZqFtiIp6VxqpW3coqZ2JdZnV3RN9S8yKMRIdJ",Mn="https://qdbx3pbnx6veby23pzgaowu3q40tmmrr.lambda-url.us-east-1.on.aws",te="APE_CW_METRICS",Bn=10;let Fe=!1;const Dn=e=>{Fe||(window.addEventListener("beforeunload",()=>Hn()),Fe=!0);const t=He();t.push(e),t.length>=Bn?$e(t):Fn(t)},He=()=>{const e=localStorage.getItem(te);if(!e)return[];try{return JSON.parse(e)}catch(t){return[]}},$e=e=>{navigator.sendBeacon(Mn,JSON.stringify(Vn(e))),localStorage.removeItem(te)},Vn=e=>({metrics:e,xApiKey:Nn}),Fn=e=>{localStorage.setItem(te,JSON.stringify(e))},Hn=()=>{const e=He();e.length>0&&$e(e)},$n=( _hh$temp7 )=>{ var e=_hh$temp7.metricName,t=_hh$temp7.lightAdDetails,_hh$temp7$count=_hh$temp7.count,n=_hh$temp7$count===void 0?1:_hh$temp7$count,_hh$temp7$additionalDimensions=_hh$temp7.additionalDimensions,i=_hh$temp7$additionalDimensions===void 0?{}:_hh$temp7$additionalDimensions; Ct().isT1()&&Dn(Un(e,n,Wn(t,i)))},Un=(e,t,n)=>({metricName:e,timestamp:new Date().getTime(),value:t,dimensions:n}),Wn=(e,t)=>{var n,i;return{app:"LA",siteName:e.siteName,slotName:e.slotName,pageType:e.pageType,placementId:e.placementId,mediaType:e.videoCreative?"V":"D",programId:(n=e.adCreativeMetaData)==null?void 0:n.adProgramId,creativeTemplateName:(i=e.adCreativeMetaData)==null?void 0:i.adCreativeTemplateName,deviceType:e.deviceType,...t}};class Jn{constructor(t,n,i,r,s){this.id=t,this.name=n,this.divId=i,this.creative=r,this.deviceType=s,this.render=async()=>{await this.creative.render(this),Yt(this).publishLatency(performance.now())},this.firePreRenderImpression=()=>{this.creative.firePreRenderImpression(this)},this.track=()=>{this.creative.track(this)},this.collapse=async()=>{u("lightad:placement:collapse"),p("lightad:placement:collapse",{id:this.id,name:this.name}),this.parentDiv.style.display="none";const o=await D().get(this.div);$n({metricName:"placement:collapse",lightAdDetails:o.lightAdDetails,additionalDimensions:{code:"LA",creativeId:o.lightAdDetails.adCreativeMetaData.adCreativeId}})}}get div(){return document.getElementById(this.divId)}get parentDiv(){return this.div.parentElement}}const Yn=(e,t)=>{const n=Gn(t);let i=0;for(const _hh$temp8 of n){ const _hh$temp9=__arrayFrom$(_hh$temp8),r=_hh$temp9[0],s=_hh$temp9[1]; if(!Kn(r,s))continue;const o=document.elementFromPoint(r,s);o&&qn(o,e)&&i++}return i/n.length},Gn=e=>{const n=[];for(let i=0;i<10;i++)n.push([e.left+e.width/2,e.top+e.height*(i+.5)/10]);return n},Kn=(e,t)=>{const n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return e>=0&&e<=n&&t>=0&&t<=i},qn=(e,t)=>{if(!(e instanceof HTMLElement)||e===t||t.contains(e))return!1;const n=window.getComputedStyle(e);if(n.display==="none"||n.visibility==="hidden"||n.pointerEvents==="none"||parseFloat(n.opacity)<.7)return!1;const i=n.backgroundColor;return!((i==="transparent"||/,0\)$/.test(i)||i==="")&&!n.backgroundImage.includes("url"))},Qn=(e,t)=>{const n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),i=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));if(n===0||i===0)return 0;const r=n*i,s=e.width*e.height;return r/s},V=e=>{ const _hh$temp10=e,t=_hh$temp10.height,n=_hh$temp10.top,_hh$temp10$left=_hh$temp10.left,i=_hh$temp10$left===void 0?0:_hh$temp10$left,_hh$temp10$width=_hh$temp10.width,r=_hh$temp10$width===void 0?Xn():_hh$temp10$width; return{top:n,bottom:n+t,left:i,right:i+r,width:r,height:t}},Xn=()=>window.innerWidth||document.documentElement.clientWidth,ne="mash",zn=async e=>new Promise((t,n)=>{if(!P){n(new Error("mash:getobstructions:missing"));return}const i=setTimeout(()=>{n(new Error("mash:getobstructions:timeout"))},e),r=performance.now();P.when(ne).execute(s=>{var o,a;if(!((a=(o=s==null?void 0:s.appCX)==null?void 0:o.uiOrchestrator)!=null&&a.getObstructions)){clearTimeout(i),n(new Error("mash:getobstructions:missing"));return}s.appCX.uiOrchestrator.getObstructions({successCallback:c=>{clearTimeout(i),t({boundingBoxes:(c.boundingBoxes||[]).map(V),isFullyObstructed:c.isFullyObstructed,latencyMs:performance.now()-r})},failCallback:()=>{clearTimeout(i),n(new Error("mash:getobstructions:failure"))}})})}),jn=e=>{if(!P){u("mash:missing",1);return}P.when(ne).execute(t=>{t==null||t.addEventListener("obstructionsChanged",e)})},Zn=e=>{if(!P){u("mash:missing",1);return}P.when(ne).execute(t=>{t==null||t.removeEventListener("obstructionsChanged",e)})},ei=(e,t)=>{const n=t.getObstructingRectangles();return n.length===0?0:n.reduce((r,s)=>r+Qn(e,s),0)},ti=async e=>{try{e.setObstructingRectangles([]),e.listenerHandler||(e.listenerHandler=i=>ni(i,e),jn(e.listenerHandler));const n=await zn(950);e.setObstructingRectangles(ii(n,e))}catch(n){F(n.message,e)}},ni=(e,t)=>{var n;t.setObstructingRectangles((((n=e==null?void 0:e.detail)==null?void 0:n.boundingBoxes)||[]).map(V))},ii=(e,t)=>e.isFullyObstructed?(F("viewPixel:iab:obstruction:native:fullviewport",t,1),[V({height:window.innerHeight,top:0})]):(ri(e.boundingBoxes,t),e.boundingBoxes.map(V)),F=(e,t,n=1)=>{t.metricsLogged.has(e)||(u(e,n),L(e,n),t.metricsLogged.add(e))},ri=(e,t)=>{for(const n of e)F("mash:getobstructions:response:height",t,n.height),F("mash:getobstructions:response:top",t,n.top)},si=e=>{if(e.listenerHandler){try{Zn(e.listenerHandler)}catch(t){}e.listenerHandler=void 0}},H=()=>{let e=[];const n={metricsLogged:new Set,listenerHandler:void 0,setObstructingRectangles:i=>{e=i},getObstructingRectangles:()=>e};return ti(n),{getObstructionPercentage( _hh$temp11 ){ var i=_hh$temp11.element,_hh$temp11$elementDOMRectOverride=_hh$temp11.elementDOMRectOverride,r=_hh$temp11$elementDOMRectOverride===void 0?i.getBoundingClientRect():_hh$temp11$elementDOMRectOverride; const s=Yn(i,r),o=ei(r,n);return Math.max(s,o)},cleanup(){si(n)}}};class Ue{constructor(t,n,i,r,s){this.pixel=t,this.viewabilityStandard=n,this.visibilityChangeService=i,this.viewabilityService=r,this.videoPixelValidator=s,this.metricsLogged=new Set,this.wasObstructed=!1,this.emitObstructionRecoveryMetrics=o=>{this.wasObstructed&&this.logMetrics("viewpixel:iab:obstruction:recovered",1,o)},this.logMetrics=(o,a=1,c)=>{this.metricsLogged.has(o)||(u(o,a),L(o,a),c&&(p(o,c,a),w(o,c,a)),this.metricsLogged.add(o))}}postPixelFireCleanup(t,n){t.unobserve(n.div),clearTimeout(this.viewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),this.visibilityChangeService.removeVisibilityChangeDetection(),this.emitObstructionRecoveryMetrics(n),this.viewabilityService.cleanup()}postPlacementExitsViewportCleanup(){clearTimeout(this.viewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),clearInterval(this.shouldFirePixelIntervalId),this.visibilityChangeService.removeVisibilityChangeDetection()}fireInObserver(t,n){this.fire(n),this.postPixelFireCleanup(t,n)}startInViewTimer(t,n){this.viewTimerTimeoutId=setTimeout(()=>this.fireInObserver(t,n),this.viewabilityStandard.thresholdTimeVisibleMs),this.performContinuousObstructionCheck(t,n),this.visibilityChangeService.setupVisibilityChangeDetection(this.viewTimerTimeoutId,t,n)}performContinuousObstructionCheck(t,n){this.obstructionCheckIntervalId=setInterval(()=>{try{this.viewabilityService.isViewabilityObstructed(n,this.viewabilityStandard.thresholdPercentage)&&(this.wasObstructed=!0,clearTimeout(this.viewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),this.startInViewTimer(t,n))}catch(r){he(r==null?void 0:r.message,r),clearInterval(this.obstructionCheckIntervalId)}},100)}track(t){new IntersectionObserver((n,i)=>{n.forEach(r=>{r.isIntersecting?this.startInViewTimer(i,t):this.postPlacementExitsViewportCleanup()})},{threshold:this.viewabilityStandard.thresholdPercentage}).observe(t.div)}async fire(t){this.videoPixelValidator&&!this.videoPixelValidator.shouldFirePixel()&&await this.waitUntilShouldFirePixel(),this.pixel.fire(t)}waitUntilShouldFirePixel(){return new Promise(t=>{this.shouldFirePixelIntervalId=setInterval(()=>{this.videoPixelValidator&&this.videoPixelValidator.shouldFirePixel()&&(clearInterval(this.shouldFirePixelIntervalId),t())},100)})}}const We={keepalive:!0,mode:"no-cors"};class ${constructor(t,n,i,r,s,o=[]){this.url=t,this.loggingContext=n,this.generatePixelUrl=i,this.pixelIdentifier=r,this.pixelLogger=s,this.urls3p=o,this.isFired=!1,this.pixel=a=>{const c=document.createElement("img");return c.id="".concat(this.pixelIdentifier.testId,"_").concat(a.name),c.style.display="none",c.setAttribute("pixel-url",this.generatePixelUrl(this.url,a)),c}}async fire(t){this.isFired||(await fetch(this.generatePixelUrl(this.url,t),We),t.div.appendChild(this.pixel(t)),this.isFired=!0,this.pixelLogger(this.pixelIdentifier,this.loggingContext,t),this.urls3p.forEach(n=>fetch(n,We)))}}const oi={testId:"ape_btr_impression",csmLogId:"imp:btr"},ai={testId:"ape_impression",csmLogId:"imp:cod"},ci={testId:"ape_measurability",csmLogId:"imp:atf"},di={testId:"ape_impression",csmLogId:"imp:skan"},li={testId:"skan_view_pixel",csmLogId:"view:skan"},ui={testId:"ape_viewability_iab",csmLogId:"view:iab"},_=(e=u,t=p)=>(n,i,r)=>{var s;e("pixel:".concat(n.csmLogId)),t("pixel:".concat(n.csmLogId),r),e("pixel:".concat(n.csmLogId,":").concat(i.aaxProgramId)),e("pixel:".concat(n.csmLogId,":device:").concat((s=r.deviceType)==null?void 0:s.toLowerCase()))},Je={H1_DESKTOP_HEIGHT:240,H1_DESKTOP_WIDTH:940},hi=e=>{if(mi(e)){const t={height:Je.H1_DESKTOP_HEIGHT,width:Je.H1_DESKTOP_WIDTH};return pi(e.div,t)}return e.div.getBoundingClientRect()},mi=e=>e.name.toLowerCase()==="gateway_desktop-h1_desktop",pi=(e,t)=>{const n=e.getBoundingClientRect(),r=(n.left+n.right)/2-t.width/2;return new DOMRect(r,n.y,t.width,t.height)},gi=e=>{const t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i={top:Math.max(0,e.top),left:Math.max(0,e.left),bottom:Math.min(t,e.bottom),right:Math.min(n,e.right)};if(e.top>=t||e.left>=n||e.bottom<=0||e.right<=0||e.width<=0||e.height<=0)return 0;const r=(i.right-i.left)*(i.bottom-i.top),s=e.width*e.height;return r/s},Ei=e=>{var n;const t=e.placement.div.getBoundingClientRect();return{v:{def:e.definition,p:e.thresholdPercentage,t:e.thresholdTimeVisibleMs,ib:e.isBtr},wh:window.innerHeight||document.documentElement.clientHeight,ww:window.innerWidth||document.documentElement.clientWidth,sx:window.scrollX,sy:window.scrollY,ah:t.height,aw:t.width,top:t.top,left:t.left,ptv:(new Date().getTime()-((n=window.aPageStart)!=null?n:0))/1e3,ttv:(new Date().getTime()-e.adStartTime)/1e3}},U=e=>{const t=new Set,n=(r,s=1,o)=>{t.has(r)||(u(r,s),L(r,s),o&&(p(r,o,s),w(r,o,s)),t.add(r))},i=(r,s)=>{const o=hi(r),a=gi(o),c=e.getObstructionPercentage({element:r.div,elementDOMRectOverride:o}),d=a-c<s;return d&&n("viewpixel:iab:obstruction",1,r),d};return{isViewabilityObstructed(r,s){return i(r,s)},cleanup(){e.cleanup()}}},Ye=()=>{const e=(t,n,i)=>{document.hidden?(clearTimeout(t),n.unobserve(i.div)):n.observe(i.div)};return{removeVisibilityChangeDetection(){this.activeVisChangeHandler&&(document.removeEventListener("visibilitychange",this.activeVisChangeHandler),this.activeVisChangeHandler=void 0)},setupVisibilityChangeDetection(t,n,i){this.removeVisibilityChangeDetection(),this.activeVisChangeHandler=()=>e(t,n,i),document.addEventListener("visibilitychange",this.activeVisChangeHandler)}}},Ge="AppAdsMshopIOSPlugin",wi=e=>{var t;(t=window.P)==null||t.when(Ge).execute(n=>{n.startAttributeViewThroughAppAds({skAdNetwork:e})})},fi=e=>{var t;(t=window.P)==null||t.when(Ge).execute(n=>{n.endAttributeViewThroughAppAds({skAdNetwork:e})})};class bi{constructor(t,n,i){this.loggingContext=t,this.skAdNetwork=n,this.pixelLogger=i,this.isFired=!1}async fire(t){this.isFired||(wi(this.skAdNetwork),this.isFired=!0,this.pixelLogger(di,this.loggingContext,t))}}class yi{constructor(t,n,i){this.loggingContext=t,this.pixelLogger=n,this.skAdNetwork=i,this.isFired=!1}async fire(t){this.isFired||(fi(this.skAdNetwork),this.isFired=!0,this.pixelLogger(li,this.loggingContext,t))}}const ie="btr_client",Ke="cod_client",qe="atf",Qe="v",vi="pj",Ii="c",W=/\${AAX_TYPE}/,Xe=/\${AAX_PAYLOAD}/,Pi="{}",Ti="",ze=(e,t,n)=>{if(t===Ti)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));const i=new URL(e),r=i.searchParams.get(t),o=JSON.parse(r||Pi),a= __call$(Object,"assign",[o,n]) ;return i.searchParams.set(t,JSON.stringify(a)),i.toString()},_i=e=>ze(jt(e),Ii,{measurementMethod:ie}),Li=e=>{const t=e.includes(".paets.");return ze(e,vi,t?{}:{measurementMethod:Ke})},Si=(e,t)=>{const n={atf:yt(t.div)},i=encodeURIComponent(JSON.stringify(n));return W.test(e)? __call$(__call$(e,"replace",[W,qe]),"replace",[Xe,i]) :"".concat( __call$(e,"replace",[/\/$/,""]) ,"/").concat(qe,"/").concat(i)},J={set:(e,t)=>{e.div.dataset.isBtr=String(t)},get:e=>e.div.dataset.isBtr===String(!0)},Ai=e=>{const t=new Date().getTime();return(n,i)=>{const r={placement:i,definition:e.definition,thresholdPercentage:e.thresholdPercentage,thresholdTimeVisibleMs:e.thresholdTimeVisibleMs,isBtr:J.get(i),adStartTime:t},s=encodeURIComponent(JSON.stringify(Ei(r)));return W.test(n)? __call$(__call$(n,"replace",[W,Qe]),"replace",[Xe,s]) :"".concat( __call$(n,"replace",[/\/+$/,""]) ,"/").concat(Qe,"/").concat(s)}},Y={IAB_VIDEO:{definition:"iab",thresholdPercentage:.5,thresholdTimeVisibleMs:2e3},IAB_LARGE_DISPLAY:{definition:"iab",thresholdPercentage:.3,thresholdTimeVisibleMs:1e3},IAB_DISPLAY:{definition:"iab",thresholdPercentage:.5,thresholdTimeVisibleMs:1e3},SKAN:{definition:"skan",thresholdPercentage:.5,thresholdTimeVisibleMs:2e3}},je=( _hh$temp12 )=>{ var e=_hh$temp12.target,t=_hh$temp12.onIntersection,n=_hh$temp12.onExit,i=_hh$temp12.options; const r=new IntersectionObserver((s,o)=>{s.forEach(a=>{a.isIntersecting?t(o,a):n(o,a)})},i);return r.observe(e),r},Ci=(e,t,n,i)=>{const r=a=>{let c;const d={wasObstructed:!1};je({target:a.div,onIntersection:l=>c=s(a,l,d),onExit:()=>c==null?void 0:c(),options:{threshold:t.thresholdPercentage}})},s=(a,c,d)=>{let l=performance.now(),m=!1;const k=setInterval(()=>{o(a)||ki()?(d.wasObstructed=!0,m=!0):m?(l=performance.now(),m=!1):xi(l,t.thresholdTimeVisibleMs)&&Oi(i)&&(e.fire(a),x(d.wasObstructed),c.unobserve(a.div))},Ri),x=(de=!1)=>{de&&Ni(a),clearInterval(k),n.cleanup()};return x},o=a=>{try{return n.isViewabilityObstructed(a,t.thresholdPercentage)}catch(c){return he(c==null?void 0:c.message,c),!1}};return{track:r,viewabilityStandard:t}},Ri=100,ki=()=>document.hidden,xi=(e,t)=>performance.now()-e>=t,Oi=e=>e.every(t=>t.shouldFirePixel()),Ni=e=>{const t="viewpixel:iab:obstruction:recovered";u(t),L(t),p(t,e),w(t,e)},Mi= _hh$temp13=>{var e=_hh$temp13.btrPixelUrl,t=_hh$temp13.loggingContext;return e?new $(e,t,_i,oi,_()):void 0;} ,Bi= _hh$temp14=>{var e=_hh$temp14.aaxImpPixelUrl,t=_hh$temp14.imp3pUrls,n=_hh$temp14.loggingContext;return new $(e,n,Li,ai,_(),t);} ,Di= _hh$temp15=>{var e=_hh$temp15.aaxInstrPixelUrl,t=_hh$temp15.loggingContext;return new $(e,t,Si,ci,_());} ,Vi=(e,t,n,i,r)=>e==="V"?re(n,Y.IAB_VIDEO,r()):Fi(i)&&Hi(t)?re(n,Y.IAB_LARGE_DISPLAY):re(n,Y.IAB_DISPLAY),Fi=e=>e==="DESKTOP",Hi=e=>$i(e)>=242500,$i=e=>e.getBoundingClientRect().height*e.getBoundingClientRect().width,re=(e,t,n)=>{const i=new $(e.aaxInstrPixelUrl,e.loggingContext,Ai(t),ui,_());return kt().isT1()?Ci(i,t,U(H()),n?[n]:[]):new Ue(i,t,Ye(),U(H()),n)},Ui=e=>{if(e.skAdNetwork)return new bi(e.loggingContext,e.skAdNetwork,_())},Wi=e=>{if(e.skAdNetwork){const t=new yi(e.loggingContext,_(),e.skAdNetwork);return new Ue(t,Y.SKAN,Ye(),U(H()),void 0)}},Ji=e=>{const t=e==null?void 0:e.querySelector("video");if(!t)throw new Error("No <video> element found inside #".concat(e.id));let n=0,i=0;return t.addEventListener("play",()=>{i=0,n=performance.now()}),t.addEventListener("pause",()=>i=0),t.addEventListener("ended",()=>i=0),t.addEventListener("timeupdate",()=>{t.paused||(i=performance.now()-n)}),{shouldFirePixel(){return i>=2e3}}},Yi=e=>{const t=Array.from(e.querySelectorAll("img")).filter(n=>getComputedStyle(n).display!=="none");return Gi(t)},Gi=e=>e.length===0?{success:!1,code:"NO_CREATIVE"}:e.some(t=>t.complete&&t.naturalWidth>0&&t.naturalHeight>0)?{success:!0,code:"BEGIN_TO_RENDER"}:{success:!1,code:"ERROR"},Ze=async(e=document.body)=>{let n=0;const i=5;return new Promise(r=>{const s=setInterval(()=>{n+=i,Yi(e).success?(clearInterval(s),r(ie)):n>=75&&(clearInterval(s),r(Ke))},i)})},et=e=>e!==1004&&Rt().isT1(),tt=(e,t)=>!t.isViewabilityObstructed(e,0),Ki=(e,t,n)=>{const i=setInterval(()=>{tt(e,t)&&(clearInterval(i),n())},100);return i},qi=(e,t,n,i)=>{let r;je({target:e.div,onIntersection:s=>{tt(e,i)?nt(e,t,n,s):r=Ki(e,i,()=>nt(e,t,n,s))},onExit:()=>{clearInterval(r)},options:{threshold:0}})},nt=async(e,t,n,i)=>{var r;await t.impressionPixel.fire(e),n&&((r=t.btrPixel)==null||r.fire(e)),t.measurabilityPixel.fire(e),i.disconnect()},Qi="data-val",Xi=e=>{var i,r;if(e==="")return"";const t="ape_".concat(e,"_placement_ClickTracking"),n=document.getElementById(t);return(r=(i=n==null?void 0:n.getAttribute)==null?void 0:i.call(n,Qi))!=null?r:""},zi="&pd_rd_plhdr=t",ji=(e,t)=>{if(e===zi||e.trim()==="")return t;const n=/pd_rd_plhdr=t/g,i=r=> __call$(r.trim(),"replace",[/^(&amp;|&)+|(&amp;|&)+$/g,""]) ;return  __call$(t,"replace",[n,i(e)]) },Zi=async e=>{const t=Xi(e.name);if(t)for(const n of e.div.querySelectorAll("a")) __set$(n,"href",ji(t,__get$(n,"href"))) },er=(e,t,n)=>{let i=!1;return{adElement:document.getElementById(e).querySelector("img"),async render(r){i=await(xt().isT1()?rr(r.div,r.name):Ze(r.div))===ie,Zi(r)},firePreRenderImpression(r){tr(r,t,n)},track(r){nr(r,t,i,n),ir(r,t,i)}}},tr=(e,t,n)=>{et(n)||t.impressionPixel.fire(e)},nr=(e,t,n,i)=>{var s,o;const r=H();if(et(i)){qi(e,{impressionPixel:t.impressionPixel,btrPixel:t.btrPixel,measurabilityPixel:t.measurabilityPixel},n,U(r));return}n&&((s=t.btrPixel)==null||s.fire(e)),t.measurabilityPixel.fire(e),(o=t.skanImpressionPixel)==null||o.fire(e).then(()=>{var a;return(a=t.skanTrackingPixel)==null?void 0:a.track(e)})},ir=(e,t,n)=>{J.set(e,n),t.iabViewPixel.track(e)},rr=async(e,t)=>Ze(sr(e,t)),sr=(e,t)=>{var i;if(e.shadowRoot)return e.shadowRoot;const n=document.getElementById("ape_la_".concat(t,"_iframe"));return(i=n==null?void 0:n.contentDocument)!=null&&i.body?n.contentDocument.body:e},se="gw-desktop-herotator",oe=()=>{var e;(e=window.P)==null||e.when(se).execute(t=>{t.pause()})},it=()=>{var e;(e=window.P)==null||e.when(se).execute(t=>{t.resume()})},or=(e,t)=>{var n;(n=window.P)==null||n.when(se).execute(i=>{i.addObserver(e,t)})},ar=e=>{or("page_changed",()=>e.currentTime=0),e.paused||oe(),e.addEventListener("play",()=>oe()),e.addEventListener("timeupdate",()=>{e.paused||oe()}),e.addEventListener("pause",()=>it()),e.addEventListener("ended",()=>it())},rt="gw-video-orchestrator",cr=(e,t,n)=>{var i;(i=window.P)==null||i.when(rt).execute(r=>{try{r.subscribe(e,t,n)}catch(s){ue("gw-video-orchestrator error: ".concat(JSON.stringify(s)))}})},dr=e=>st(e),lr=()=>st(),st=e=>{var t;(t=window.P)==null||t.when(rt).execute(n=>{n.elect(e)})},ae=new Set,ur=e=>{cr(e,t=>{t&&e.paused&&!ae.has(e.id)?e.play():!t&&!e.paused&&e.pause()},{priority:100})},ot=e=>{ae.add(e.id),lr()},hr=e=>{ur(e),e.addEventListener("user-play",()=>{ae.delete(e.id),dr(e)}),e.addEventListener("user-pause",()=>ot(e)),e.addEventListener("ended",()=>ot(e))},mr=async(e,t)=>{await pr(),t.paused||e.dispatchEvent(G(e,"painterAttentionStart")),t.addEventListener("play",()=>e.dispatchEvent(G(e,"painterAttentionStart"))),t.addEventListener("pause",()=>e.dispatchEvent(G(e,"painterAttentionEnd"))),t.addEventListener("ended",()=>e.dispatchEvent(G(e,"painterAttentionEnd")))},G=(e,t)=>new CustomEvent(t,{bubbles:!0,detail:{painterInstanceId:e.id}}),pr=async()=>new Promise(e=>{var t;(t=window.P)==null||t.when("gw-wd-autorotation-orchestrator").execute(()=>{e()})}),gr=/^((https?:)?\/\/)(.*\.)?amazon\./,Er="_top",wr="_blank",fr=150,br=e=>{gr.test(e)?setTimeout(()=>{window.open(e,Er)},fr):window.open(e,wr)},C={DISABLED:"disabled",ENABLED_BUT_HIDDEN:"hidden"},at=new Set,yr=(e,t,n)=>{const i=r=>new Promise((s,o)=>{r.addEventListener("canplaythrough",()=>s()),r.addEventListener("error",a=>o(a)),r.readyState>=3&&s()});return{adElement:document.getElementById(e).querySelector("video"),async render(r){this.adElement&&(vr(this.adElement),ar(this.adElement),mr(r.div,this.adElement),hr(this.adElement),Ir(e,this.adElement),Lr(e,this.adElement),await i(this.adElement))},firePreRenderImpression(r){},track(r){const s=this.adElement;Sr(s,r,t,n),Ar(t,r),Cr(s,r,n)}}},vr=e=>{e.addEventListener("ended",()=>e.currentTime=0)},Ir=(e,t)=>{var d;const n=e+"_h1_control_",i=(d=document.getElementById(n+"play"))!=null?d:document.getElementById(n+"replay"),r=document.getElementById(n+"pause"),s=document.getElementById(n+"muted"),o=document.getElementById(n+"audio"),a=document.getElementById(n+"cc_on"),c=document.getElementById(n+"cc_off");t.addEventListener("mute",()=>{o.style.setProperty("display","none"),s.style.removeProperty("display")}),t.addEventListener("unmute",()=>{s.style.setProperty("display","none"),o.style.removeProperty("display")}),t.addEventListener("pause",()=>{r.style.setProperty("display","none"),i.style.removeProperty("display")}),t.addEventListener("ended",()=>{r.style.setProperty("display","none"),i.style.removeProperty("display")}),t.addEventListener("play",()=>{i.style.setProperty("display","none"),r.style.removeProperty("display")}),a==null||a.addEventListener("click",()=>{a.style.setProperty("display","none"),c==null||c.style.removeProperty("display")}),c==null||c.addEventListener("click",()=>{c.style.setProperty("display","none"),a==null||a.style.removeProperty("display")})},Pr=(e,t)=>{t.textContent=e.text,t.style.removeProperty("display")},ct=e=>{e.textContent="",e.style.setProperty("display","none")},dt=(e,t)=>{const n=e.activeCues&&e.activeCues[0];n!=null&&n.text?Pr(n,t):ct(t)},Tr=e=>e.mode===C.DISABLED,_r=e=>e.mode===C.ENABLED_BUT_HIDDEN,Lr=(e,t)=>{const n=document.getElementById("".concat(e,"_h1_overlay_cc"));if(n&&t.textTracks&&t.textTracks.length>0){const i=t.textTracks[0];i.mode=C.DISABLED,i.addEventListener("modechange",()=>{const r=()=>dt(i,n);Tr(i)?(ct(n),i.removeEventListener("cuechange",r)):_r(i)&&(dt(i,n),i.addEventListener("cuechange",r))})}},Sr=(e,t,n,i)=>{var r;e.paused?e.addEventListener("playing",()=>{var s;J.set(t,!0),n.impressionPixel.fire(t),(s=n.btrPixel)==null||s.fire(t),n.measurabilityPixel.fire(t),h(i.impressions)},{once:!0}):(J.set(t,!0),n.impressionPixel.fire(t),(r=n.btrPixel)==null||r.fire(t),n.measurabilityPixel.fire(t),h(i.impressions))},Ar=(e,t)=>{e.iabViewPixel.track(t)},Cr=(e,t,n)=>{Rr(e,t,n),kr(e,n),xr(e,n),Or(e,n),Nr(e,n),Mr(e,n),Br(e,n),Dr(e,n),Vr(e,n),Fr(e,n)},Rr=async(e,t,n)=>{e.error?(await t.collapse(),n.error&&ce(n.error)):e.addEventListener("error",async()=>{await t.collapse(),n.error&&ce(n.error)})},kr=(e,t)=>{e.paused?e.addEventListener("play",()=>h(t.start)):h(t.start)},xr=(e,t)=>{e.addEventListener("timeupdate",()=>{const n=e.currentTime/e.duration;n>=.25&&h(t.firstQuartile),n>=.5&&h(t.midpoint),n>=.75&&h(t.thirdQuartile)})},Or=(e,t)=>{e.addEventListener("ended",()=>h(t.complete))},Nr=(e,t)=>{e.addEventListener("mute",()=>h(t.mute))},Mr=(e,t)=>{e.addEventListener("unmute",()=>h(t.unmute))},Br=(e,t)=>{e.addEventListener("pause",()=>h(t.pause))},Dr=(e,t)=>{let n=-1;e.addEventListener("timeupdate",()=>{e.currentTime<n&&h(t.rewind),n=e.currentTime})},Vr=(e,t)=>{let n=!1;e.addEventListener("pause",()=>n=!0),e.addEventListener("play",()=>n&&h(t.resume))},Fr=(e,t)=>{e.addEventListener("click",n=>{n.preventDefault(),h(t.clickTracking),t.clickThrough&&br(t.clickThrough)})},h=async e=>{for(const t of e)await ce(t)},ce=async e=>{at.has(e)||(at.add(e),await fetch(e,{keepalive:!0,mode:"no-cors",priority:"low"}),ue("Fired pixel: "+e))},Hr=e=>e.videoCreative?Ur(e):$r(e),$r=e=>er(e.adUnitPlacementId,lt(e),Number(e.adCreativeMetaData.adProgramId)),Ur=e=>{var n,i,r,s,o,a,c,d,l,m;const t=e.videoCreative;return yr(e.adUnitPlacementId,lt(e),{impressions:t.impressions,error:t.error,start:(n=t.trackingEvents.start)!=null?n:[],firstQuartile:(i=t.trackingEvents.firstQuartile)!=null?i:[],midpoint:(r=t.trackingEvents.midpoint)!=null?r:[],thirdQuartile:(s=t.trackingEvents.thirdQuartile)!=null?s:[],complete:(o=t.trackingEvents.complete)!=null?o:[],mute:(a=t.trackingEvents.mute)!=null?a:[],unmute:(c=t.trackingEvents.unmute)!=null?c:[],pause:(d=t.trackingEvents.pause)!=null?d:[],rewind:(l=t.trackingEvents.rewind)!=null?l:[],resume:(m=t.trackingEvents.resume)!=null?m:[],clickThrough:t.videoClicks.clickThrough,clickTracking:t.videoClicks.clickTracking})},lt=e=>{const t=document.getElementById(e.adUnitPlacementId),n=Wr(e),i=e.videoCreative?"V":"D",r=()=>Ji(t);return{impressionPixel:Bi(n),measurabilityPixel:Di(n),iabViewPixel:Vi(i,t,n,e.deviceType,r),skanImpressionPixel:Ui(n),skanTrackingPixel:Wi(n),btrPixel:Mi(n)}},Wr=e=>{var t;return{aaxImpPixelUrl:e.aaxImpPixelUrl,imp3pUrls:e.imp3pUrls,aaxInstrPixelUrl:e.aaxInstrPixelUrl,abpAcceptable:e.abpAcceptable,abpStatus:(t=e.abpStatus)!=null?t:"-1",btrPixelUrl:e.btrPixelUrl,skAdNetwork:e.skAdNetwork,loggingContext:{aaxProgramId:Number(e.adCreativeMetaData.adProgramId)}}},Jr=e=>new Jn(e.placementId,e.placementName,e.adUnitPlacementId,Hr(e),e.deviceType),Yr=e=>{const t=Jr(e);return{placement:t,feedback:On(t,e),lightAdDetails:e}};class Gr{async replay(t){const n=await y(t);n.currentTime=0,await this.play(t)}async play(t){const n=await y(t);n.play(),n.dispatchEvent(new CustomEvent("user-play"))}async pause(t){const n=await y(t);n.pause(),n.dispatchEvent(new CustomEvent("user-pause"))}async mute(t){const n=await y(t);n.muted=!0,n.dispatchEvent(new CustomEvent("mute"))}async unmute(t){const n=await y(t);n.muted=!1,n.dispatchEvent(new CustomEvent("unmute"))}async enableCc(t){var s;const n=await y(t),i=document.getElementById("".concat(t,"_h1_overlay_cc")),r=(s=n==null?void 0:n.textTracks)==null?void 0:s[0];!n||!i||!r||(r.mode=C.ENABLED_BUT_HIDDEN,r.dispatchEvent(new CustomEvent("modechange")))}async disableCc(t){var s;const n=await y(t),i=document.getElementById("".concat(t,"_h1_overlay_cc")),r=(s=n==null?void 0:n.textTracks)==null?void 0:s[0];!n||!i||!r||(r.mode=C.DISABLED,r.dispatchEvent(new CustomEvent("modechange")))}visibilityChange(t,n){t.forEach(i=>{var r;(r=document.getElementById(i))==null||r.style.removeProperty("display")}),n.forEach(i=>{var r;(r=document.getElementById(i))==null||r.style.setProperty("display","none")})}}const y=async e=>{const t=document.getElementById(e);return(await D().get(t)).placement.creative.adElement};class Kr{constructor(){this.init=t=>{b("perf:la","init");try{An(Yr(t))}catch(n){g("Error LightAdApi.init",n)}},this.feedback=new Me,this.video=new Gr}}const qr="LIGHT_AD_API_READY_EVENT";(()=>{window.APE_LA||(b("perf:la","create LightAdApiImpl"),window.APE_LA=new Kr,window.dispatchEvent(new CustomEvent(qr)))})()})();


/*hammerhead|script|end*/