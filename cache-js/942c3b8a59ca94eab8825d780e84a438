/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
var SAContinueSearch;(function(){function d(n){t.logInfo("Click");var i=SACSUtils.generatePopupLink(n,r,o,s,l,!1,!1,f,!1,w,b);i&&_w.open(i,"_blank");n&&( __set$(__get$(_w,"location"),"href",n) )}function g(n){SACSUtils.saveCSUpsellCloseData();t.logInfo("Continue");n&&( __set$(__get$(_w,"location"),"href",n) )}function u(n){var t=i.historyData;if(t.triggered)return!1;switch(n){case 0:return!t.triggered;case 1:return t.clickCount<2;case 2:return t.clickCount>=2&&!t.triggered;case 3:return t.clickCount==2&&!t.triggered}return!1}function nt(n){sj_be(n,"click",function(n){var r,f;if(t.logInfo("linkClick"),u(0)){if(r=SACSUtils.checkBNP(),r[0]){t.logDetailInfo(SACSUtils.CS_EVENT_BNP_SHOW,r[1]);return}if(t.logInfo("rulePass"),i.searchTriggered(),!v)return n.preventDefault(),n.stopPropagation(),f=n&&n.currentTarget&& __get$(n.currentTarget,"href") ? __get$(n.currentTarget,"href") :"",c.show(f),!1}})}function tt(n){sj_be(n,"click",function(){i.addClickCount();t.logInfo("resultClick");u(3)&&h()},!0)}function h(){var i,r,n,u;for(t.logInfo("bindClickTrigger"),i="",i=f?"#b_results>li:not(.b_ad):not(.opal_serpftrc) a":'#b_results>li:not(#mfa_root):not(.b_ad):not(.opal_serpftrc):not(.usrlc_bpc) a:not([href^=javascript]):not([href*="/fd/ls/GLinkPing.aspx"])',r=document.querySelectorAll(i),n=0;n<r.length;n++)u= __get$(r,n) ,u&&nt(u)}function it(){var t,i,n,r;if(window.sacsConfig){if(u(1))for(t="",t=f?"#b_results>li:not(.opal_serpftrc)":"#b_results>li:not(#mfa_root):not(.opal_serpftrc):not(.usrlc_bpc)",i=document.querySelectorAll(t),n=0;n<i.length;n++)r= __get$(i,n) ,r&&tt(r);u(2)&&h()}}var e="sapphire_continue_search",n=typeof SACSUtils!="undefined"&&SACSUtils&&SACSUtils.initTriggerRuleConfig(),r=n.TrackCode,o=n.TrackCodeName,s=n.CampaignCode,l=n.NetworkCode,a=n.CoolDownDayCount,f=n.EnableGlink,v=n.IsCustomControl,rt=n.SerpClickCount,ut=n.KeepDataTime,ft=n.ImpressionCount,et=n.MaxClickCount,ot=n.MaxCloseCount,st=n.IsCN,ht=n.IsIOS,y=n.CheckDSE,p=n.SWK2MControl,w=n.GoCopilotSearch,b=n.CheckCopilotAnswer,k=function(){function n(){this.historyData={sid:"",clickCount:0,triggered:!1,lastTriggerTime:0};this.sid=""}return n.prototype.initialize=function(){var t,n;try{if(this.sid=SACSUtils.getSessionId(),this.sid)return t=localStorage.getItem(e),t&&(n=JSON.parse(t),n&&n.sid?n.sid==this.sid&&(this.historyData=n):this.historyData.sid=this.sid),this.save(),!0}catch(i){}return!1},n.prototype.addClickCount=function(){this.historyData.clickCount++;this.sid&&(this.historyData.sid=this.sid);this.save()},n.prototype.searchTriggered=function(){SACSUtils.saveCSUpsellTriggerData();this.historyData.triggered=!0;this.historyData.lastTriggerTime=(new Date).getTime();this.sid&&(this.historyData.sid=this.sid);this.save()},n.prototype.save=function(){try{localStorage.setItem(e,JSON.stringify(this.historyData))}catch(n){}},n}(),c,t,i;typeof SACSUtils!="undefined"&&SACSUtils?(SACSUtils.isSwiftkeyDeepSearch()&&p&&(r="1msj4za7_1mogl67f",o="Bing_Mobile_swiftkey_control",s="1mxwc839_1mdu951y"),t=new SACSUtils.CSLogger(r),t.logInfo("trigger"),SACSUtils.checkInitConditions(r,a,t,y)&&(i=new k,i.initialize()?(c=new SACSUtils.CSPopupView(t,d,g),it(),t.logInfo("initialize")):t.logInfo(SACSUtils.CS_EVENT_INIT_FALSE))):Log&&Log.Log&&Log.Log("OpalUpsell","SACSUtils","untrigger")})(SAContinueSearch||(SAContinueSearch={}))
/*hammerhead|script|end*/