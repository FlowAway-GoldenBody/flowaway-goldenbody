/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
(function(){"use strict";const X=(e,t,n)=>"".concat(e).concat(n?":".concat(n.placementName):""," - ").concat(t),E=(e,t,n)=>{var s;const o=X(e,t,n);return(s=performance==null?void 0:performance.mark)==null||s.call(performance,o),o},Y=e=>{console.debug(e)},T=(e,t)=>{console.error(e,JSON.stringify(t)),_("ERROR",e,P(e,t))},Z=(e,t)=>{console.error(e,JSON.stringify(t)),_("FATAL",e,P(e,t))},_=(e,t,n)=>{var o;(o=window.ueLogError)==null||o.call(window,n,{logLevel:e,attribution:"APE-safeframe",message:t+" | "})},P=(e,t)=>t instanceof Error?t:t?new Error(t):new Error(e),R="sf iframe ready",Q="aUAZqFtiIp6VxqpW3coqZ2JdZnV3RN9S8yKMRIdJ",ee="https://qdbx3pbnx6veby23pzgaowu3q40tmmrr.lambda-url.us-east-1.on.aws",v="APE_CW_METRICS",te=10;let b=!1;const O=e=>{b||(window.addEventListener("beforeunload",()=>oe()),b=!0);const t=N();t.push(e),t.length>=te?L(t):se(t)},N=()=>{const e=localStorage.getItem(v);if(!e)return[];try{return JSON.parse(e)}catch(t){return[]}},L=e=>{navigator.sendBeacon(ee,JSON.stringify(ne(e))),localStorage.removeItem(v)},ne=e=>({metrics:e,xApiKey:Q}),se=e=>{localStorage.setItem(v,JSON.stringify(e))},oe=()=>{const e=N();e.length>0&&L(e)},u=(e,t)=>{const n=()=>{var o,s;return(s=(o=e==null?void 0:e.renderingWeblabs)==null?void 0: __get$(o,t) )==null?void 0:s.toLowerCase()};return{is(o){return n()===o},isInTreatment(){return!!n()&&n()!=="c"},getTreatment(){var o;return(o=n())!=null?o:"c"}}},re=()=>u(window,"ADPT_SF_LOW_RATE_METRIC_LOGGING_1256362"),ie=()=>u(window,"ADPT_SF_PIXEL_FIRING_1151992"),k=()=>u(window,"APM_STORES_JPS_JRS_SAFEFRAME_CLICK_TRACKING_PAINTER_TEST_1259727"),ae=()=>u(window,"APM_STORES_JPS_JRS_SAFEFRAME_VIEW_RATE_EXPERIMENT_1289633"),F=()=>u(window,"APM_STORES_JPS_JRS_SAFEFRAME_DISABLE_USER_AGENT_1326744"),ce=e=>{var n,o;if(!window.APE_SF)return;const t=(o=(n=window.APE_SF).loggedMetricNames)!=null?o:n.loggedMetricNames=new Set;t.has(e.metricName)||(t.add(e.metricName),O(e))},C=( _hh$temp0 )=>{ var e=_hh$temp0.metricName,t=_hh$temp0.adDetails,_hh$temp0$count=_hh$temp0.count,n=_hh$temp0$count===void 0?1:_hh$temp0$count,_hh$temp0$additionalDimensions=_hh$temp0.additionalDimensions,o=_hh$temp0$additionalDimensions===void 0?{}:_hh$temp0$additionalDimensions,_hh$temp0$once=_hh$temp0.once,s=_hh$temp0$once===void 0?!1:_hh$temp0$once; re().is("t1")&&(s?ce:O)(le(e,n,de(t,o)))},le=(e,t,n)=>({metricName:e,timestamp:new Date().getTime(),value:t,dimensions:n}),de=(e,t)=>{var n,o;return{app:"SF",siteName:e.siteName,slotName:e.slotName,pageType:e.pageType,placementId:e.placementId,mediaType:e.mediaType,programId:(n=e.adCreativeMetaData)==null?void 0:n.adProgramId,creativeTemplateName:(o=e.adCreativeMetaData)==null?void 0:o.adCreativeTemplateName,deviceType:e.deviceType,...t}},me="sfImpression",g=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),he=g("bodyEnd","be"),ue=g("criticalFeature","cf"),ge=g("loaded","ld"),pe=g("loaded","ld",me),fe=()=>{Object.defineProperty(Document.prototype,"cookie",{get:()=>"",set:()=>{}})},Ee=()=>{var e;(e=window==null?void 0:window.navigator)!=null&&e.geolocation&&(window.navigator.geolocation.watchPosition=(t,n,o)=>0,window.navigator.geolocation.getCurrentPosition=(t,n,o)=>{})},ve=()=>{Object.defineProperty(Navigator.prototype,"userAgent",{get:()=>"",set:()=>{}})},Ce=e=>{const t=Ie(window.parent,e);Object.defineProperty(window,"parent",{value: new Proxy(window.parent,{get:(n,o)=>o==="postMessage"?t:__get$(n,o)}) })},Ie=(e,t)=>{let n=!1;return(o,s,r)=>{if(o===R&&!n)return n=!0, __call$(e,"postMessage",[o,s,r]) ;console.debug("postMessage blocked"),C({metricName:"postMessageBlocked",adDetails:t})}},I=(e,t)=>{console.error(e,t)},x=e=>{e.sendLatencyMetric(ge),e.sendLatencyMetric(ue)},we=e=>({onSafeFrameReady:t=>d(e,"onSafeFrameReady",t),onPreCreativeWrite:t=>d(e,"onPreCreativeWrite",t),onPostCreativeWrite:t=>d(e,"onPostCreativeWrite",t),onCreativeBeginToRender:t=>d(e,"onCreativeBeginToRender",t),onCreativeLoad:t=>d(e,"onCreativeLoad",t),onError:t=>d(e,"onError",t),onClick:t=>d(e,"onClick",t)}),d=(e,t,n)=>{const o={command:t,adDetails:n,payload:{}};try{ __call$(e,"postMessage",[o]) }catch(s){I("Post Message error",s)}};class ye{constructor(t,n,o){this.c=t,this.o=n,this.mL=o,this.pendingMessages=new Map,this.waitForMessageProcessed=async s=>new Promise(r=>this.pendingMessages.set(s,r)),this.receiveMessage=s=>{try{const r=s.data,i=r.command?r.command.split("."):[];let c= __get$(this.c,i[0]) ;for(let a=1;a<i.length&&c;a++)c= __get$(c,__get$(i,a)) ;if(r.command==="customMessage"){const a=r.data.key,l=r.data.data;if(typeof  __get$(this.mL,a) =="function")try{ __call$(this.mL,a,[l]) }catch(h){this.c.logError("Custom Message Listener Error",h)}}else c&&(c(r.data),Ae(r.command,this.pendingMessages))}catch(r){this.c.logError("Error with "+s.data.command,r);return}}}}const Ae=(e,t)=>{const n=t==null?void 0:t.get(e);n==null||n(),t==null||t.delete(e)};class Me{constructor(t,n){this.o=t,this.messagePort=n,this.sendMessage=(o,s)=>{const r={command:o,adDetails:this.o,payload:s||{}};try{ __call$(this.messagePort,"postMessage",[r]) }catch(i){I("Post Message error",i)}}}}const D=e=>{const t=Array.from(e.querySelectorAll("img")).filter(n=>getComputedStyle(n).display!=="none");return Se(t)},Se=e=>e.length===0?{success:!1,code:"NO_CREATIVE"}:e.some(t=>t.complete&&t.naturalWidth>0&&t.naturalHeight>0)?{success:!0,code:"BEGIN_TO_RENDER"}:{success:!1,code:"ERROR"},Te={win:{t:0,b:0,l:0,r:0,w:0,h:0},self:{t:0,l:0,r:0,b:0,xiv:0,yiv:0,iv:0,z:0,w:0,h:0},exp:{t:0,l:0,r:0,b:0,xs:0,yx:0}},_e=(e=Te)=>{const t=e;return{set(n){t.self={...t.self,...n.self}},get(){return t}}},W=((e=-1)=>{let t=e;return{set(n){t=n},get(){return t}}})(),w=_e(),Pe=()=>({ext:{inViewPercentage:()=>W.get(),geom:()=>w.get()}}),Re=e=>e!==1004&&ae().isInTreatment(),be=.95,Oe=75,Ne="ad-background-image",Le=e=>e/window.innerWidth>=be,ke=()=>{var t;return __call$((t=document.documentElement.innerText)!=null?t:"","replace",[/\s/g,""]) .length>Oe},Fe=e=>e.some(t=>t.classList.contains(Ne)),xe=e=>{for(const t of e){const n=t.getBoundingClientRect();if(Le(n.width))return!0}return!1},De=()=>{const e=Array.from(document.querySelectorAll("img"));return e.length?Fe(e)?!0:!(!xe(e)||ke()):!1},We=e=>{De()&&e.sendMessage("resizeForImageOnlyTemplate")},ze="pj",Be="adload:iframeinitialized",Ue="adload:impression",Ge="btr:impression",$e="cod:impression",y="impressionFired",Je="adload_iframeinitialized",Ve="impression",He=e=>e.adCreativeMetaData.adCreativeTemplateName? __call$(e.adCreativeMetaData.adCreativeTemplateName.toLowerCase(),"replace",[/[^0-9a-z]/g,""]) :"unknown",Ke=(e,t)=>{const n=document.createElement("img");return n.id=e,n.style.display="none",n.setAttribute("pixel-url",t),n},m=(e,t,n)=>{let o=e+t;return n&&(o+="_"+n),o},qe=e=>!!document.getElementById(e),je=async(e, _hh$temp1 )=>{ var t=_hh$temp1.pixelUrl,n=_hh$temp1.id,o=_hh$temp1.baseCounterName,s=_hh$temp1.baseMetricName,r=_hh$temp1.counterExtension,i=_hh$temp1.logId,c=_hh$temp1.aaxProgramId; try{return qe(n)?!1:(e.logCsaEvent(m(s,"fired",r)),e.countMetric(m(o,"fired",r),1),await fetch(t,{keepalive:!0,mode:"no-cors",priority:"low"}),document.getElementsByTagName("body")[0].appendChild(Ke(n,t)),e.countMetric(m(o,"loaded",r),1),e.logCsaEvent(m(s,"loaded",r)),e.countMetric("pixel:".concat(i),1,!0),c&&e.countMetric("pixel:".concat(i,":").concat(c),1,!0),!0)}catch(a){throw e.countMetric(m(o,"error",r),1),e.logCsaEvent(m(s,"error",r)),e.logError("Error firing pixels: ".concat(t),a),a}},Xe="{}",Ye=(e,t,n)=>{const o=new URL(e),s=o.searchParams.get(t),i=JSON.parse(s||Xe),c= __call$(Object,"assign",[i,n]) ;return o.searchParams.set(t,JSON.stringify(c)),o.toString()},z="btr_client",A="cod_client";class Ze{constructor(t,n){this.c=t,this.o=n,this.fireCodImpressionPixel=async()=>{let o=!1;o=await je(this.c,{id:"ape_impression",pixelUrl:Qe(this.o.aaxImpPixelUrl,ze,A),baseCounterName:Ue,baseMetricName:Ve,logId:"imp:cod",aaxProgramId:this.o.adCreativeMetaData.adProgramId}),o&&this.emitImpressionPixelMetrics(!1)}}emitImpressionPixelMetrics(t){const n=this.o.adCreativeMetaData.adProgramId?this.o.adCreativeMetaData.adProgramId:"unknown",o=He(this.o);this.c.countMetric(y,1,!0),this.c.countMetric(y+":program:"+n,1,!0),this.c.countMetric(y+":template:"+o,1,!0);const s=t?Ge:$e;this.c.countMetric(s,1,!1),this.c.countMetric(s,1,!0),this.c.countMetric(s+":program:"+n,1,!0),this.c.countMetric(s+":template:"+o,1,!0)}}const Qe=(e,t,n)=>{const o=e.includes(".paets."),s=Ye(e,t,{measurementMethod:n});return o?e:s},et=async(e=document.body)=>{let n=0;const o=5;return new Promise(s=>{const r=setInterval(()=>{n+=o,D(e).success?(clearInterval(r),s(z)):n>=75&&(clearInterval(r),s(A))},o)})},B=e=>{var t;return(t=document.getElementById(U))==null?void 0:t.setAttribute(e,"true")},tt=(e,t)=>{const o=setInterval(async()=>{var s;if(typeof((s=window==null?void 0:window.crv)==null?void 0:s.detectAndReportBlankAd)=="function"){clearInterval(o);try{await window.crv.detectAndReportBlankAd(document.body)?(t.countMetric("blankadvalidation:failure",1,!0),C({metricName:"blank:ad",adDetails:e,additionalDimensions:{creativeId:e.adCreativeMetaData.adCreativeId}})):t.countMetric("blankadvalidation:success",1,!0)}catch(r){t.countMetric("blankadvalidation:error",1,!0)}}},1e3)},U="creativeReplayStatus",G="creativeReplayComplete",nt='document.dispatchEvent(new CustomEvent("'.concat(G,'"));'),st=()=>'<script id="'.concat(U,'">').concat(nt,"<\/script>"),$=e=>{var s,r;const t=document.createRange();t.selectNode(e);const o=t.createContextualFragment(e.outerHTML).firstElementChild;if(o.getAttribute("src"))o.async=!1;else{const i=e.innerHTML;o.async=!1,o.setAttribute("src","data:text/javascript;charset=UTF-8,".concat(encodeURIComponent(i)))}(s=e.parentNode)==null||s.insertBefore(o,e.nextSibling),(r=e.parentNode)==null||r.removeChild(e)},ot=e=>{if(document.documentElement==null){const t=document.createElement("html");document.appendChild(t)}document.documentElement.innerHTML=e},J=e=>{const t=e.querySelectorAll("script");for(const n of t)$(n)},rt=(e,t,n,o)=>{o.onPreCreativeWrite(n),ie().is("t1")?e.sendMessage("sendEventAddedCreative"):Re(Number(n.adCreativeMetaData.adProgramId))||(n.firePixelsAfter?e.sendMessage("fireImpressionWithDelay"):t.fireCodImpressionPixel())},it=async(e,t,n,o,s)=>{ct(),at();const r=e.btrPixelUrl?await et():A;s.onCreativeBeginToRender(e);const i=r===z;i&&t.sendMessage("sendEventCreativeBeginToRender"),t.sendMessage("sendEventCreativeLoaded",{isBtr:i}),dt(),tt(e,o),lt(e)&&We(t)},at=()=>{B("creativeLoad"),Tt()},ct=()=>{B("creativedomcontentloaded"),document.dispatchEvent(new Event("DOMContentLoaded"))},lt=e=>{var t;return["mweb","mshop"].includes((t=e.deviceType)==null?void 0:t.toLowerCase())},dt=()=>{document.addEventListener("touchstart",{handleEvent:()=>{}},!1)},mt=async e=>{const t=ht();V(e,st()),await t},ht=()=>new Promise(e=>{document.addEventListener(G,()=>e(),{once:!0})}),V=(...e)=>{const t=e.filter(n=>!!n).map(String).join("");if(document.currentScript!==null){let n=document.currentScript;for(n.insertAdjacentHTML("afterend",t),n=n.nextElementSibling;n!==null;)n.tagName==="SCRIPT"?$(n):J(n),n=n.nextElementSibling}else ot(t),J(document.documentElement)},ut="&pd_rd_plhdr=t",p=new RegExp(/((&#\d{2,4};)|(&[a-z]{2};)|(&[a-z]{3,7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#\d{2,4};)|(&[a-z]{2,7};)|(%[a-fA-F0-9]{2})|(\W))/),H=1,gt=7,K=8,M="$"+H,S="$"+K,pt=(e,t)=>{let n=t,o=e;if(e===ut||e.trim()==="")return n;o= __call$(o,"replace",[/&amp;/g,"&"]) ,o.startsWith("&")&&(o= __call$(o,"replace",[/^&+/,""]) ),o.endsWith("&")&&(o= __call$(o,"replace",[/&+$/,""]) );try{let s,r=0;do{if(r++,s=n.match(p),!s)break;const i= __get$(s,H) ,c= __get$(s,K) ,a= __get$(s,gt) ,l=i.startsWith("&")&&i.endsWith(";")||c.startsWith("&")&&c.endsWith(";"),h=i.startsWith("%")&&c.startsWith("%")&&a==="%3D";l?n= __call$(n,"replace",[p,M+__call$(o,"replace",[/&/g,"&amp;"])+S]) :h?n= __call$(n,"replace",[p,M+encodeURIComponent(o)+S]) :n= __call$(n,"replace",[p,M+o+S]) }while(s&&r<10)}catch(s){return t}return n};class ft extends Error{}const Et=(e,t)=>{ const _hh$temp2=t,_hh$temp2$onReport=_hh$temp2.onReport,n=_hh$temp2$onReport===void 0?()=>{}:_hh$temp2$onReport; if(typeof window.ReportingObserver<"u"){const o=(r=[])=>{const i=vt(e);r.forEach(c=>{if(c.type==="intervention"){const a=new ft(JSON.stringify({adDetails:i,report:c.toJSON()}));n(a)}})},s=new ReportingObserver(o,{buffered:!0});s.observe(),document.addEventListener("pagehide",()=>{o(s.takeRecords())})}},vt=e=>{ const _hh$temp3=e,t=_hh$temp3.adCreativeMetaData,n=_hh$temp3.slotName,o=_hh$temp3.placementId,s=_hh$temp3.placementName,r=_hh$temp3.pageType; return{adCreativeMetaData:t,slotName:n,placementId:o,placementName:s,pageType:r}},q=500,Ct=async(e,t=q)=>new Promise(n=>{let o=-1;const s=r=>{const i=r.data,c="percolateClickTracking";if(i.command!==c)throw new Error("Unexpected command ".concat(i,", Expected ").concat(c));window.clearTimeout(o),n(i.data)};o=window.setTimeout(()=>{e.removeEventListener("message",s),n(""),Y("Did not receive percolateClickTracking within ".concat(t,"ms"))},t),e.addEventListener("message",s,{once:!0}),e.start()}),It=e=>wt(e),wt=e=>decodeURIComponent(escape(atob(e))),yt=e=>{if(!e.htmlContentEncoded||e.htmlContentEncoded.trim().length===0)throw new Error("No html content found on a server side fetch");const t=e.htmlContentEncodedLength?e.htmlContentEncoded:It(e.htmlContentEncoded);return At(t,e.htmlContentEncodedLength),t},At=(e,t)=>{t&&e.length!==t&&console.debug("Mismatched expected htmlContentEncoded size. Expected ".concat(t," but got ").concat(e.length))};class Mt{constructor(t,n,o,s,r,i){this.o=t,this.mp=n,this.cms=o,this.cmr=s,this.c=r,this.eventsChannel=i,this.state={hasFiredCODPixel:!1},this.clickTrackingParam="",this.logInterventionReport=a=>{C({metricName:"reporting-observer:heavy-ad-intervention",adDetails:this.o,additionalDimensions:{creativeId:this.o.adCreativeMetaData.adCreativeId}}),this.c.logFatal("heavy-ad-intervention",a)},this.initSFClient=async( _hh$temp4 ={})=>{ var _hh$temp4$timeout=_hh$temp4.timeout,a=_hh$temp4$timeout===void 0?q:_hh$temp4$timeout; this.ensureGlobals(),fe(),Ee(),F().is("t1")&&ve(),document.write=V,this.c.sendLatencyMetric(he),this.eventsChannel.onSafeFrameReady(this.o),k().is("t1")||(this.clickTrackingParam=await Ct(this.mp,a)),this.mp.onmessage=this.cmr.receiveMessage,this.c.countMetric(Be,1),this.c.logCsaEvent(Je),await this.writeCreativeToDocument()},this.writeCreativeToDocument=async()=>{var a;St(this,this.o);try{const l=pt(this.clickTrackingParam,yt(this.o));rt(this.cms,this.c.cr,this.o,this.eventsChannel),await mt(l),this.c.logAPIInvocation("creativeReplayComplete"),this.eventsChannel.onPostCreativeWrite(this.o),await it(this.o,this.cms,this.c.cr,this.c,this.eventsChannel),this.eventsChannel.onCreativeLoad(this.o),k().is("t1")&&document.body.addEventListener("click",()=>{this.eventsChannel.onClick(this.o)},{once:!0}),((a=window.renderingWeblabs)==null?void 0:a.APM_STORES_JPS_JRS_CREATIVE_BOOKS_ADS_1277965)&&this.c.countMetric("bookAdsWeblabTriggered",1,!0)}catch(l){this.c.logError("Failed to get creative content",l),this.c.collapseSlotInternal("CLIENTSETUP"),this.eventsChannel.onError(this.o)}},this.ensureGlobals=()=>{var a;window.onerror=this.handleErrors,window.$sf=(a=window.$sf)!=null?a:Pe(),window.aaxInstrPixelUrl=this.o.aaxInstrPixelUrl},this.handleErrors=(a,l,h,qt,jt)=>{const Xt=jt||new Error(a.toString());return l!=null&&l.startsWith("chrome-extension://")||l!=null&&l.startsWith("moz-extension://")?(this.c.logAPIInvocation("sfBrowserExtensionError"),!0):(this.c.logError("Window.onerror triggered inside of the iframe. Src: ".concat(l,":").concat(h,":").concat(qt),Xt),D(document.body).success||this.c.collapseSlotInternal("CLIENTERROR"),this.eventsChannel.onError(this.o),!0)};const c=document.open.bind(document);document.open=(...a)=>{const l=c(...a);return this.ensureGlobals(),l},this.nativeWrite=document.write.bind(document),window.onerror=this.handleErrors,Et(this.o,{onReport:this.logInterventionReport})}}const St=(e,t)=>{t.creativeSupportsTTIMeasurement||window.addEventListener("load",()=>x(e.c),{once:!0}),window.addEventListener("load",()=>e.c.fireViewableLatencyMetrics(),{once:!0})},Tt=()=>{window.dispatchEvent(new Event("load"))};class _t{constructor(t,n,o){this.cms=t,this.o=n,this.mL=o,this.fireImpression=async s=>{this.sendLatencyMetric(pe),await this.cr.fireCodImpressionPixel()},this.changeSize=(s,r)=>{this.cms.sendMessage("changeSize",{width:s,height:r})},this.logCsaEvent=s=>{this.cms.sendMessage("logCsaEvent",{metricName:s})},this.registerCustomMessageListener=(s,r)=>{ __set$(this.mL,s,r) ,this.countMetric("sf:commonmain:registerCustomMessageListener",1,!0)},this.sendLatencyMetric=s=>{this.cms.sendMessage("sendLatencyMetric",{latencyMetricType:s,timestamp:new Date})},this.countMetric=(s,r=1,i=!1)=>{this.cms.sendMessage("countMetric",{metricMsg:s,value:r,isGlobal:i})},this.fireViewableLatencyMetrics=()=>{this.cms.sendMessage("fireViewableLatencyMetrics",{adLoadedTimestamp:Date.now()})},this.feedbackLabelRendered=()=>{this.cms.sendMessage("feedbackLabelRendered")},this.feedbackOpenModal=()=>{this.cms.sendMessage("feedbackOpenModal")},this.updatePlayingTimeForVideo=s=>{this.cms.sendMessage("sendSfVideoContinuousPlaytimeSeconds",{sfVideoContinuousPlaytimeSeconds:s})},this.requestVideoAutoplay=()=>{this.cms.sendMessage("requestVideoAutoplay")},this.releaseVideoAutoplay=()=>{this.cms.sendMessage("releaseVideoAutoplay")},this.haveVideoAutoplayPermission=()=>{this.cms.sendMessage("haveVideoAutoplayPermission")},this.isOnAmazon=()=>!0,this.logError=(s,r,i)=>{this.cms.sendMessage("logError",{message:s,error:r,level:i})},this.logFatal=(s,r,i)=>{this.cms.sendMessage("logFatal",{message:s,error:r,level:i})},this.collapseSlotInternal=s=>{this.logAPIInvocation("collapseSlot"),this.logAPIInvocation("collapseSlot".concat(s)),this.cms.sendMessage("collapseSlot",s)},this.collapseSlot=()=>{this.collapseSlotInternal("CREATIVE")},this.resizeCreativeWrapper=s=>{const r=window.document.getElementById("ape_".concat(this.o.scope,"_creativeWrapper"));r!==null&&(r.style.height=s.height,r.style.width=s.width)},this.triggerEventInIframe=s=>{window.dispatchEvent(new Event("outerpage"+s.eventType))},this.logAPIInvocation=(s,...r)=>{const i="messenger_";this.cms.sendMessage("logAPIInvocation",{apiName:s,apiParams:r}),this.cms.sendMessage("logCsaEvent",{metricName:i+s})},this.setupComputedAdDetails=s=>{window.aPageStart=s.aPageStart,window.adStartTime=s.adStartTime},this.signalAdLoadedAndInteractive=()=>{x(this)},this.sendEventAddedCreative=()=>{this.cms.sendMessage("sendEventAddedCreative")},this.populateGeom=s=>w.set(s.geom),this.populateSafeFrameExt=s=>{W.set(s.inViewPercentage),w.set(s.geom)},this.expandInline=()=>{this.logAPIInvocation("expandInline"),this.cms.sendMessage("expandInline")},this.resetSlot=()=>{this.logAPIInvocation("resetSlot"),this.cms.sendMessage("resetSlot")},this.cr=new Ze(this,n)}}class f{constructor(t,n,o){this.messageName=t,this.c=n,this.cms=o,this.execute=s=>{this.c.logAPIInvocation(this.messageName),this._successCallback=s.successCallback,this._failCallback=s.failCallback,this.cms.sendMessage(this.messageName,s)},this.update=s=>{typeof s.value>"u"?this._successCallback&&this._successCallback():this._failCallback&&this._failCallback(s.value||s.errorMsg)}}}class Pt extends f{constructor(t,n){super("openInExternalBrowser",t,n)}}class Rt extends f{constructor(t,n){super("showEmbeddedBrowser",t,n)}}class bt extends f{constructor(t,n){super("launchIntentURL",t,n)}}class Ot extends f{constructor(t,n){super("openInApp3pBrowser",t,n)}}class Nt{constructor(t,n,o){this.o=o,this.isAUIAvailable=()=>!0,this.openInExternalBrowser=new Pt(t,n),this.showEmbeddedBrowser=new Rt(t,n),this.launchIntentURL=new bt(t,n),this.openInApp3pBrowser=new Ot(t,n)}}const Lt="unknown",j=0,kt=()=>{const e=window.navigator,t=e==null?void 0:e.connection;return(t==null?void 0:t.type)||(t==null?void 0:t.effectiveType)||Lt},Ft=e=>{var n,o;const t=e?(o=(n=xt(e))==null?void 0:n.di)==null?void 0:o.ct:j;return console.error(t),{connectionType:kt(),mobileConnectionType:t||j}},xt=e=>{const n=/^([.\d]*\s*)({.*})$/.exec(e);return JSON.parse(n[2])};class Dt extends _t{constructor(t,n,o){super(t,n,o),this.onPageEvent={callback:()=>{},execute:(s,r)=>{this.logAPIInvocation("onPageEvent"),this.onPageEvent.callback=r,this.cms.sendMessage("onPageEvent",{eventName:s})},update:()=>{typeof this.onPageEvent.callback=="function"&&this.onPageEvent.callback()}},this.renderClickThroughAppAds=s=>{this.logAPIInvocation("renderClickThroughAppAds"),this.cms.sendMessage("renderClickThroughAppAds", __get$(s,"href") )},this.sendAdInfo=s=>{s&&this.cms.sendMessage("getAdInfo",{mobileAdsInfo:s})},this.getPlacementInfo=()=>(this.logAPIInvocation("getPlacementInfo"),{pageType:this.o.pageType,slotName:this.o.slotName,subPageType:this.o.subPageType}),this.getUserAgentInfo=()=>(this.logAPIInvocation("getUserAgentInfo"),F().is("t1")?"":window.navigator.userAgent),this.getDocumentCookie=()=>{this.logAPIInvocation("getDocumentCookie");const s=this.o.amznAppContext?"amzn-app-ctxt=".concat(this.o.amznAppContext):void 0;return s!=null?s:""},this.getUserConnectionInfo=()=>(this.logAPIInvocation("getUserConnectionInfo"),Ft(this.o.amznAppContext)),this.mash=new Nt(this,t,n)}}const Wt=(e,t)=>{const n=new Me(e,t),o={},s=new Dt(n,e,o),r=new ye(s,e,o),i=we(t);return new Mt(e,t,n,r,s,i)},zt=()=>{window.dcmads=window.dcmads||{},window.dcmads.eids="4|40004007"},Bt=["amazon.com","amazon.in","amazon.de","amazon.co.jp","amazon.co.uk","amazon.ca","amazon.com.au","amazon.com.be","amazon.com.br","amazon.com.mx","amazon.com.tr","amazon.eg","amazon.es","amazon.fr","amazon.it","amazon.nl","amazon.pl","amazon.sa","amazon.se","amazon.sg","amazon.ae","amazon.co.za","amazon.cn","amazon.dev","boxofficemojo.com","a2z.com","console.harmony.a2z.com","depot.advertising.amazon.dev","harmony.a2z.com","d116tmsy8qpy37.cloudfront.net","d1u3onhraow3iz.cloudfront.net","d1ubtmbgqm1jlf.cloudfront.net","d2dk40qqpfbxei.cloudfront.net","d2jbcalcdp0p85.cloudfront.net","d2y0vsnh7zmbrq.cloudfront.net","d345aeerog89iv.cloudfront.net","imdb.com"],Ut=(e,t)=>t.some(n=>e.endsWith(n)),Gt=()=>{const e=document.referrer;if(!e)return!1;try{const t=new URL(e);return Ut(t.hostname,Bt)}catch(t){return T("Invalid referrer URL:",e),!1}},$t=e=>{if(window.origin!=="null"&&!Gt()){Z("Referrer not allowed: ".concat(document.referrer));return}const t=Kt();if(t){const n=new MessageChannel;Jt(e,n.port1,t),Ht(n.port2,t)}else T("Ad Details not found in name!")},Jt=async(e,t,n)=>{var o;try{zt();const s=n;window.renderingWeblabs=JSON.parse((o=s.weblabTreatments)!=null?o:""),E("sf:perf:client","SF received ad details",s),Ce(s);const r=e(t,s);try{r.initSFClient()}catch(i){r.c.logError("Could not init SafeFrame Client",i)}}catch(s){I("Could not init ",s)}},Vt=(e,t)=>{const n=Wt(t,e);return window.MSFClient=n.c,n},Ht=(e,t)=>{E("sf:perf:client","Start Send Ready ".concat(e),t), __call$(window.parent,"postMessage",[R,"*",[e]]) },Kt=()=>window.name!==""?JSON.parse(window.name):null;E("perf:sf:client","Enter msf.ts"),window.MSFClient||$t(Vt)})();


/*hammerhead|script|end*/