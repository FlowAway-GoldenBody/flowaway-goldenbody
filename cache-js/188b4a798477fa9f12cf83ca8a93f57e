/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
(self.webpackChunkxiangqi_client=self.webpackChunkxiangqi_client||[]).push([[9849],{87771(e,t,n){var r=n(96540);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var i=o(r);const a=r.createContext(null);function s(){const e=r.useContext(a);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function l(e){var t;return null!==(t=null===e||void 0===e?void 0:e.clientId)&&void 0!==t?t:null===e||void 0===e?void 0:e.client_id}const c={large:40,medium:32,small:20};t.j=function( _hh$temp0 ){ var e=_hh$temp0.onSuccess,t=_hh$temp0.onError,n=_hh$temp0.useOneTap,o=_hh$temp0.promptMomentNotification,_hh$temp0$type=_hh$temp0.type,a=_hh$temp0$type===void 0?"standard":_hh$temp0$type,_hh$temp0$theme=_hh$temp0.theme,u=_hh$temp0$theme===void 0?"outline":_hh$temp0$theme,_hh$temp0$size=_hh$temp0.size,f=_hh$temp0$size===void 0?"large":_hh$temp0$size,d=_hh$temp0.text,p=_hh$temp0.shape,m=_hh$temp0.logo_alignment,g=_hh$temp0.width,v=_hh$temp0.locale,y=_hh$temp0.click_listener,h=_hh$temp0.containerProps,b=__rest$Object(_hh$temp0,["onSuccess","onError","useOneTap","promptMomentNotification","type","theme","size","text","shape","logo_alignment","width","locale","click_listener","containerProps"]);  const w=r.useRef(null),_hh$temp1=s(),S=_hh$temp1.clientId,k=_hh$temp1.scriptLoadedSuccessfully,A=r.useRef(e); A.current=e;const O=r.useRef(t);O.current=t;const E=r.useRef(o);return E.current=o,r.useEffect(()=>{var e,t,r,o,i,s,c,h,_;if(k)return null===(r=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.initialize({client_id:S,callback:e=>{var t;if(!(null===e||void 0===e?void 0:e.credential))return null===(t=O.current)||void 0===t?void 0:t.call(O); const _hh$temp2=e,n=_hh$temp2.credential,r=_hh$temp2.select_by; A.current({credential:n,clientId:l(e),select_by:r})},...b}),null===(s=null===(i=null===(o=null===window||void 0===window?void 0:window.google)||void 0===o?void 0:o.accounts)||void 0===i?void 0:i.id)||void 0===s||s.renderButton(w.current,{type:a,theme:u,size:f,text:d,shape:p,logo_alignment:m,width:g,locale:v,click_listener:y}),n&&(null===(_=null===(h=null===(c=null===window||void 0===window?void 0:window.google)||void 0===c?void 0:c.accounts)||void 0===h?void 0:h.id)||void 0===_||_.prompt(E.current)),()=>{var e,t,r;n&&(null===(r=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.cancel())}},[S,k,n,a,u,f,d,p,m,g,v]),i.default.createElement("div",{...h,ref:w,style:{height: __get$(c,f) ,...null===h||void 0===h?void 0:h.style}})},t.G_=function( _hh$temp3 ){ var e=_hh$temp3.clientId,t=_hh$temp3.nonce,n=_hh$temp3.onScriptLoadSuccess,o=_hh$temp3.onScriptLoadError,s=_hh$temp3.children; const l=function(e={}){ const _hh$temp4=e,t=_hh$temp4.nonce,n=_hh$temp4.onScriptLoadSuccess,o=_hh$temp4.onScriptLoadError,_hh$temp5=__arrayFrom$(r.useState(!1)),i=_hh$temp5[0],a=_hh$temp5[1],s=r.useRef(n); s.current=n;const l=r.useRef(o);return l.current=o,r.useEffect(()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;a(!0),null===(e=s.current)||void 0===e||e.call(s)},e.onerror=()=>{var e;a(!1),null===(e=l.current)||void 0===e||e.call(l)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),i}({nonce:t,onScriptLoadSuccess:n,onScriptLoadError:o}),c=r.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:l}),[e,l]);return i.default.createElement(a.Provider,{value:c},s)}},69849(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>it});var r=n(96540),o=n(39125),i=n(8604),a=n(67467),s=n(47459),l=n(97132),c=n(56915),u=n(68414),f=n(46942),d=n.n(f);n(63459),n(94518);var p,m,g,v,y=function(){for(var e=[],t=document.getElementsByClassName("signup-fields")[0],n=0;t&&n<t.children.length;n+=1){var r= __get$(t.children,n) .name;r?e.push(r):1=== __get$(t.children,n) .getElementsByClassName("Select-control").length&&e.push("country")}if(e.length<=0)return e;e.push("sign up button");for(var o=document.getElementsByClassName("sso-btns")[0].getElementsByTagName("button"),i=0;i<o.length;i+=1)e.push( __get$(o,i) .textContent);return e},h=n(37822),b=n(56484),w=n(39905),S=n(39030),k=n(57823),A=n(65503),O=n(21340),E=n(83601),_=n(15642),P=n(64708),x=n(19809),L=n(31470),j=n(39558),C=n(5470),I=n(72963),T=n(12244),M=n(92550),N=n(63393),F=n(28868),U=n(77869),R=n(55555),D=n(3970),B=n(18766),$=n(93535),G=n(96028),W=n(39801),V=n(83625),Y=n(9260),z=n(47408),H=n(84127),q=n(5757),Z=n(63688),K=n(40308),J=n.n(K),X=n(87771),Q=n(10116),ee=n.n(Q),te=n(21596);function ne(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const re=n(8162).Ay.div.withConfig({displayName:"wrapper__Wrapper",componentId:"sc-1agkjkl-0"})(["display:flex;justify-content:space-around;button{width:40px;height:40px;padding:0 16px;border-radius:4px;cursor:pointer;border-radius:4px;box-shadow:",";padding:0;display:flex;align-items:center;justify-content:center;","}.moneta-button{background-color:",";img{width:30px;}}.google-btn-wrapper{position:relative;.google-tooltip{min-width:150px;top:0;margin:-25px 0 0 5px;}}.google-login-btn{line-height:30px;background:white;img{width:24px;","}}.apple-login-btn{line-height:30px;background:black;color:white;img{width:20px;margin-top:-5px;}}.facebook-login-btn{color:white;background-color:",";i{font-size:23px;margin-top:2px;","}}.wx-login-btn{background:",";img{width:25px;margin-top:0px;","}}"],S.ut.$shadow_5,S.$_.phone(p||(p=ne(["\n      padding: 0;\n    "]))),S.ut.$floralWhite,S.$_.phone(m||(m=ne(["\n        width: 20px;\n      "]))),S.ut.$blue_2,S.$_.phone(g||(g=ne(["\n        font-size: 20px;\n      "]))),S.ut.$green_1,S.$_.phone(v||(v=ne(["\n        width: 20px;\n      "]))));var oe,ie,ae=n(39944);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t,n,r){ie||(ie="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:ie,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!= __get$(arguments,t) ? __get$(arguments,t) :{};t%2?ce(Object(n),!0).forEach(function(t){fe(e,t, __get$(n,t) )}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n= __get$(e,Symbol.toPrimitive) ;if(void 0!==n){var r=n.call(e,t||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}): __set$(e,t,n) ,e}function de(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return pe(c,"_invoke",function(n,r,o){var i,s,l,c=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,l=e,d.n=n,a}};function p(n,r){for(s=n,l=r,t=0;!f&&c&&!o&&t<u.length;t++){var o,i= __get$(u,t) ,p=d.p,m=i[2];n>3?(o=m===r)&&(l= __get$(i,(s=i[4])?5:(s=3,3)) ,i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,l=m;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,i){if(s||(o="next"),t= __get$(i,o) ){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?l:n.call(r,d))!==a)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u= __get$([],r) ?t(t( __call$([],r,[]) )):(pe(t={},r,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,pe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,pe(f,"constructor",c),pe(c,"constructor",l),l.displayName="GeneratorFunction",pe(c,o,"GeneratorFunction"),pe(f),pe(f,o,"Generator"),pe(f,r,function(){return this}),pe(f,"toString",function(){return"[object Generator]"}),(de=function(){return{w:i,m:d}})()}function pe(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}pe=function(e,t,n,r){function i(t,n){pe(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}): __set$(e,t,n) :(i("next",0),i("throw",1),i("return",2))},pe(e,t,n,r)}function me(e,t,n,r,o,i,a){try{var s= __call$(e,i,[a]) ,l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){me(i,r,o,a,s,"next",e)}function s(e){me(i,r,o,a,s,"throw",e)}a(void 0)})}}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&& __get$(e,Symbol.iterator) ||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++) __set$(r,n,__get$(e,n)) ;return r}var he=function(e){var t,n=e.intl,o=e.onSignInSocialUser,i=e.page,a=e.weChatData,s=e.weChatSuccess,l=e.weChatError,u=e.forgotSuccess,f=e.makeWeChatSignUp,d=e.windowWidth,p=ve((0,r.useState)(!1),2),m=p[0],g=p[1],v=(0,r.useRef)(null),h=(0,c.W6)(),A=(0,r.useMemo)(function(){return!(0,L.DH)()&&d>S.LR.lgTablet.maxWidth||(0,L.DH)()&&(0,L.ey)()},[d]),O=(0,r.useCallback)(function(){var e=ge(de().m(function e(t){return de().w(function(e){for(;;)switch(e.n){case 0:try{v.current&&v.current.close(),g(!0),(t&&t.data&&t.data.type)===ae.rs&&(t&&t.data&&t.data.error?(g(!1),(0,E.A)({title:n.formatMessage(V.A.error),msg:n.formatMessage(V.A.ssoErrors.weChatCodeError),type:"error"})):f(t.data.payload))}catch(e){console.error(e)}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),[n,v,g,ae.rs,f]),_=function(e,t,r,i,a){r?o({sso_id:e,provider:t,email:r,access_token:i,is_web_sdk:!0,profileImage:a},y()):(0,E.A)({title:n.formatMessage(V.A.error),msg:n.formatMessage(V.A.ssoErrors.emailRequired),type:"warning"})};(0,r.useEffect)(function(){return function(){window.removeEventListener("message",O)}},[O]),(0,r.useEffect)(function(){l&&(0,E.A)({title:n.formatMessage(V.A.error),msg:l.message,type:"error"}),s&&o(ue(ue({},a),{},{is_web_sdk:!0})),u&&(g(!1),h.push("/account/signin"))},[l,s,u,a]);var P=function(e){var t=ee()(e.credential),n=t.sub,r=t.email;_(n,"google",r,e.credential,t.picture)},x=function(){"Sign up"===i&&(0,b.xD)(null,{provider:"google",errorFields:null,errorType:"SSO error",isSuccessful:!1,signupFields:y()}),(0,E.A)({title:n.formatMessage(V.A.error),msg:"Login with Google has failed",type:"warning"})},j=function(){if( __get$(h,"location") .search){var e= new URLSearchParams(__get$(h,"location").search) .get("redirect");if(e)return"".concat( __get$(window,"location") .origin).concat(e)}},C=function(e){var t="",n={type:t=["google-login-btn","google-login-image"].includes(e.target.className)?"google":["fa fa-facebook","facebook-login-btn metro"].includes(e.target.className)?"facebook":["apple-login-btn","apple-login-image"].includes(e.target.className)?"apple":"No provider found",data:t},r=j();r&&(n.redirectUrl=r),(0,L.nT)(e,JSON.stringify(n))},I=function(e){var t=window.outerHeight/2+window.screenY-350,r=window.outerWidth/2+window.screenX-300,o=window.open(e,"OAuth2 Popup","height=".concat(700,",width=").concat(600,",top=").concat(t,",left=").concat(r));return o||(g(!1),(0,E.A)({title:n.formatMessage(V.A.error),msg:n.formatMessage(V.A.ssoErrors.allowPopup),type:"error"}),null)},T=function(){var e=ge(de().m(function e(){var t,r,o,i;return de().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(0,L.DH)()){e.n=1;break}t={type:L.EB.WE_CHAT_SSO,data:L.EB.WE_CHAT_SSO},(r=j())&&(t.redirectUrl=r),(0,L.nT)(null,JSON.stringify(t)),e.n=6;break;case 1:return g(!0),e.p=2,e.n=3,(0,k.Ay)("users/wechat-login-uri/");case 3:null!==(o=e.v)&&void 0!==o&&o.login_url&&(I(o.login_url),window.addEventListener("message",O),g(!1)),e.n=5;break;case 4:e.p=4,i=e.v,g(!1),(0,E.A)({title:n.formatMessage(V.A.error),msg:n.formatMessage(i.message),type:"error"});case 5:return e.p=5,g(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return le(re,{className:"sso-btns"},void 0,A&&le(H.A,{onClick:T,className:"wx-login-btn",loading:m},void 0,le(N.A,{alt:"WeChat sign-in",src:w.Ay.weChatLogo})),!te.W&&le("div",{className:"google-btn-wrapper"},void 0,(0,L.DH)()?le("button",{onClick:C,className:"google-login-btn",type:"button"},void 0,le(N.A,{alt:"Google sign-in",src:w.Ay.googleLogo,className:"google-login-image"})):le(X.G_,{clientId:"1055285505382-dth8i9lti77nah6fetj8r1kitkkt4peg.apps.googleusercontent.com"},void 0,t||(t=le(X.j,{type:"icon",size:"large",shape:"square",onSuccess:P,onError:x,cookiePolicy:"single_host_origin"})))),!te.W&&le(J(),{appId:"181823670257838",fields:"email,picture",callback:function(e){var t=e.status,n=e.userID,r=e.email,o=e.accessToken;"unknown"!==t?_(n,"facebook",r,o,e.picture.data.url):"Sign up"===i&&(0,b.xD)(n,{provider:"facebook",errorFields:null,errorType:"SSO error",isSuccessful:!1,signupFields:y()})},cssClass:"facebook-login-btn",disableMobileRedirect:!0,icon:"fa-facebook",onClick:(0,L.DH)()?C:null,textButton:""}),(0,L.xX)()?le("button",{onClick:(0,L.DH)()?C:null,className:"apple-login-btn",type:"button"},void 0,le(N.A,{alt:"Apple sign-in",src:w.Ay.appleLogo,className:"apple-login-image"})):null,(0,L.oB)()&&le("button",{type:"button",className:"moneta-button",onClick:function(){var e=new URLSearchParams({client_id:"3bil62a5rpvmen55hl88iuvuch",client_redirect_url:"https://api.xiangqi.com/moneta_custom_callback"}); __set$(__get$(window,"location"),"href","".concat("https://moneta-auth.monetanetwork.com","/users/login?").concat(e.toString())) }},void 0,oe||(oe=le(N.A,{alt:"Moneta sign-in",src:w.uV,className:"moneta-login-image"}))))},be=(0,l.j8)({weChatData:(0,R.Tf)(),weChatSuccess:(0,R.yQ)(),weChatError:(0,R.pm)(),forgotSuccess:(0,R.Hk)(),windowWidth:(0,$.f1)()}),we=(0,a.connect)(be,function(e){return{makeWeChatSignUp:function(t){return e((0,D.Zx)(t))},onSignInSocialUser:function(t,n){e((0,D.Rx)(t,n))}}}),Se=(0,O.A)({key:ae.u4,saga:W.Ay,mode:A.Zc});const ke=(0,i.j4)((0,s.Zz)(Se,we)((0,r.memo)(he)));var Ae;function Oe(e,t,n,r){Ae||(Ae="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:Ae,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var Ee=function(e){var t=e.handleSubmit,n=e.showLadda,o=e.getSignInFormFields,a=e.onForgotPasswordClick,s=e.makeOnSignInSocialUser,l=e.handleChange,u=e.rememberMe,f=e.showRememberMe,d=(0,c.W6)();return r.createElement(r.Fragment,null,Oe(z.A,{className:"account-form",onSubmit:t,noValidate:!0},void 0,o(),Oe("div",{className:"forgot-password-wrapper ".concat(f?"space-between":"")},void 0,f&&Oe(Z.A,{checked:u,onChange:l,label:V.A.rememberMe}),Oe(q.A,{className:"forgot-password",onClick:a},void 0,r.createElement(i.sA,V.A.forgotPassword))),Oe(H.A,{loading:n,btnType:"red",type:"submit"},void 0,r.createElement(i.sA,V.A.signIn)),Oe("div",{className:"guest-play-wrapper"},void 0,Oe(q.A,{className:"guest-play",onClick:function(){return d.push("/")}},void 0,r.createElement(i.sA,V.A.playAsGuest)))),Oe(ke,{onSignInSocialUser:s,page:"Sign up"}))};const _e=(0,r.memo)(Ee);var Pe;function xe(e,t,n,r){Pe||(Pe="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:Pe,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var Le=function(e){var t=e.handleSubmit,n=e.showLadda,o=e.getSignUpFormFields;return xe(z.A,{className:"account-form",onSubmit:t,noValidate:!0},void 0,o(),xe(H.A,{loading:n,btnType:"red",type:"submit"},void 0,r.createElement(i.sA,V.A.signUp)))};const je=(0,r.memo)(Le);var Ce;function Ie(e,t,n,r){Ce||(Ce="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:Ce,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Te=(0,i.j4)(function(e){var t=e.intl,n=e.handleSubmit,o=e.showLadda,a=e.getSignUpFormFields,s=e.makeOnSignInSocialUser,l=e.submitEmailSuccess,u=e.submitEmailError,f=e.clearErrors,d=(0,c.W6)();return(0,r.useEffect)(function(){l&&(0,E.A)({title:t.formatMessage(V.A.success),msg:l,type:"success"}),u&&(0,E.A)({title:t.formatMessage(V.A.error),msg:u.message,type:"error"}),f()},[l,u]),r.createElement(r.Fragment,null,Ie(z.A,{className:"account-form",onSubmit:n,noValidate:!0},void 0,a(),Ie(H.A,{loading:o,btnType:"red",type:"submit"},void 0,r.createElement(i.sA,V.A.signUp)),Ie("div",{className:"guest-play-wrapper"},void 0,Ie(q.A,{className:"guest-play",onClick:function(){return d.push(A.R7.LOBBY)}},void 0,r.createElement(i.sA,V.A.playAsGuest)))),Ie("div",{className:"info-text"},void 0,Ie("p",{},void 0,r.createElement(i.sA,V.A.continueSignupWith))),Ie(ke,{onSignInSocialUser:s,page:"Sign up"}))});var Me,Ne=n(31341),Fe=n(97282);function Ue(e,t,n,r){Me||(Me="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:Me,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var Re=function(e){var t=e.handleSubmit,n=e.showLadda,o=e.getFormInput;return Ue(z.A,{className:"account-form",onSubmit:t,noValidate:!0},void 0,Ue(Fe.pQ,{},void 0,r.createElement(i.sA,V.A.forgotPassword)),o("email","email"),Ue(H.A,{loading:n,btnType:"red",type:"submit"},void 0,r.createElement(i.sA,V.A.send)))};const De=(0,r.memo)(Re);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}var $e,Ge,We,Ve,Ye;function ze(e,t,n,r){Ye||(Ye="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var a=Array(i),s=0;s<i;s++) __set$(a,s,__get$(arguments,s+3)) ;t.children=a}if(t&&o)for(var l in o)void 0=== __get$(t,l) &&( __set$(t,l,__get$(o,l)) );else t||(t=o||{});return{$$typeof:Ye,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function He(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return qe(c,"_invoke",function(n,r,o){var i,s,l,c=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,l=e,d.n=n,a}};function p(n,r){for(s=n,l=r,t=0;!f&&c&&!o&&t<u.length;t++){var o,i= __get$(u,t) ,p=d.p,m=i[2];n>3?(o=m===r)&&(l= __get$(i,(s=i[4])?5:(s=3,3)) ,i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,l=m;(t=s<2?e:l)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,i){if(s||(o="next"),t= __get$(i,o) ){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?l:n.call(r,d))!==a)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:f}}}(n,o,i),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u= __get$([],r) ?t(t( __call$([],r,[]) )):(qe(t={},r,function(){return this}),t),f=c.prototype=s.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,qe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,qe(f,"constructor",c),qe(c,"constructor",l),l.displayName="GeneratorFunction",qe(c,o,"GeneratorFunction"),qe(f),qe(f,o,"Generator"),qe(f,r,function(){return this}),qe(f,"toString",function(){return"[object Generator]"}),(He=function(){return{w:i,m:d}})()}function qe(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}qe=function(e,t,n,r){function i(t,n){qe(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}): __set$(e,t,n) :(i("next",0),i("throw",1),i("return",2))},qe(e,t,n,r)}function Ze(e,t,n,r,o,i,a){try{var s= __call$(e,i,[a]) ,l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!= __get$(arguments,t) ? __get$(arguments,t) :{};t%2?Ke(Object(n),!0).forEach(function(t){Xe(e,t, __get$(n,t) )}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var n= __get$(e,Symbol.toPrimitive) ;if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}): __set$(e,t,n) ,e}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&& __get$(e,Symbol.iterator) ||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++) __set$(r,n,__get$(e,n)) ;return r}var tt=function(e,t){for(var n=e.split("&"),r=0;r<n.length;r++){var o= __get$(n,r) .split("=");if(decodeURIComponent( __call$(o[0],"replace",[/\?/g,""]) )===t)return decodeURIComponent(o[1])}return null},nt=(0,l.j8)({loading:(0,$.Fg)(),countries:(0,$.BV)(),userError:(0,R.Ui)(),userSuccess:(0,R.dR)(),forgotSuccess:(0,R.Hk)(),submitEmailSuccess:(0,R.t_)(),submitEmailError:(0,R.EP)(),otpVerifiedSuccess:(0,R.Zz)(),otpVerifiedError:(0,R.Ug)(),APKLink:(0,$.vo)(),verifiedEmail:(0,R.LD)(),windowWidth:(0,$.f1)()}),rt=(0,a.connect)(nt,function(e){return{makeOnSignIn:function(t){return e((0,D.Qv)(t))},makeOnSignInSocialUser:function(t,n){return e((0,D.Rx)(t,n))},makeOnForgotPassword:function(t){return e((0,D._7)(t))},makeClearErrors:function(){return e((0,D.x8)())},makeLoadCountries:function(){return e((0,B.rl)())},makeCreateUser:function(t,n,r){return e((0,D.kg)(t,n,r))},makeOnForgotPasswordSet:function(){return e((0,D.aD)())},makeSubmitEmail:function(t){return e((0,D.xT)(t))},makeVerifyOTP:function(t){return e((0,D.vJ)(t))},makeClearSubmitEmailErrors:function(){return e((0,D.PR)())},makeClearVerifyOTPErrors:function(){return e((0,D.zG)())}}}),ot=(0,O.A)({key:ae.u4,saga:W.Ay,mode:A.Zc});const it=(0,i.j4)((0,s.Zz)(ot,rt,_.A)(function(e){var t=e.match,n=e.makeLoadCountries,a=e.makeClearErrors,s=e.userSuccess,l=e.forgotSuccess,f=e.submitEmailSuccess,p=e.submitEmailError,m=e.otpVerifiedSuccess,g=e.otpVerifiedError,v=e.intl,O=e.userError,_=e.makeOnForgotPasswordSet,R=e.countries,D=e.makeCreateUser,B=e.makeOnSignIn,$=e.makeOnSignInSocialUser,W=e.makeOnForgotPassword,z=e.makeSubmitEmail,H=e.makeVerifyOTP,q=e.makeClearSubmitEmailErrors,Z=e.makeClearVerifyOTPErrors,K=e.APKLink,J=e.verifiedEmail,X=e.windowWidth,Q=(0,r.useRef)({}),ee=(0,x.HW)(),te=(0,c.W6)(),ne=(0,c.zy)(),re=ne.search,oe=Qe((0,r.useState)({action:"signin",email:"",emailOrUsername:"",password:"",country:"",username:"",formSubmitted:!1,skillLevel:ae.J3[0],queryParams:{confirmation:tt(re,"confirmation_success")},rememberMe:(0,Y.Pe)()}),2),ie=oe[0],se=oe[1],le=Qe((0,r.useState)(ee),2),ce=le[0],ue=le[1],fe=Qe((0,r.useState)(0),2),de=fe[0],pe=fe[1],me=Qe((0,r.useState)(1),2),ge=me[0],ve=me[1],ye=(0,r.useMemo)(function(){return!(0,L.DH)()&&!!K},[K,L.DH]),he=(0,r.useMemo)(function(){return(0,L.DH)()||X<S.LR.phone.maxWidth},[L.DH,X]),be=(0,r.useMemo)(function(){return R&&(null===R||void 0===R?void 0:R.filter(function(e){return e.code===U.B})[0])},[R]),we=function(e,t){ __set$(Q.current,e,t?{validity:{valid:!0},value:t}:{validity:{valid:!1},value:""}) ,se(function(n){return Je(Je({},n),{},Xe({},e,t))})},Se=function(){var e,t=(e=He().m(function e(){var t,n;return He().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,k.UK)();case 1:t=e.v,n=t.country,se(function(e){return Je(Je({},e),{},{country:(null===R||void 0===R?void 0:R.find(function(e){return e.code===n}))||be})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ze(i,r,o,a,s,"next",e)}function s(e){Ze(i,r,o,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();(0,r.useEffect)(function(){var e=t.params.action;return-1===Object.values(ae.SY).indexOf(e)&&te.push("/404"),n(),function(){a()}},[]),(0,r.useEffect)(function(){ee.userName!==ce.userName&&ue(ee)},[ee]),(0,r.useEffect)(function(){f&&(ve(2),se(function(e){return Je(Je({},e),{},{formSubmitted:!1})}))},[f]),(0,r.useEffect)(function(){m&&(x.Ay.setItem(ae.vb,ie.email),Se(),ve(3),se(function(e){return Je(Je({},e),{},{email:ie.email,username:(0,Y.Ay)(ie.email),formSubmitted:!1})}))},[m]),(0,r.useEffect)(function(){if(ee&&ee.country&&R){var e=R.find(function(e){return e.code===ee.country.code});e&&e!==ie.country&&we(ae.D4.COUNTRY,e)}},[R]),(0,r.useEffect)(function(){var e=t.params.action,n=0,r=null;he&&(r=(0,Y.SO)()),se(function(t){var n,o;return Je(Je({},t),{},{emailOrUsername:(null===(n=r)||void 0===n?void 0:n.email)||"",password:(null===(o=r)||void 0===o?void 0:o.password)||"",username:"",action:e})}),e===ae.SY.forgotPassword?n=2:e===ae.SY.signup&&(n=1),pe(n)},[t.params.action,he]),(0,r.useEffect)(function(){se(function(e){return Je(Je({},e),{},{showLadda:!1})}),(s&&ce&&ce.id||l)&&(ie.action===ae.SY.signin?te.push("/"):ie.action===ae.SY.signup?((0,E.A)({title:v.formatMessage(V.A.accountCreated),msg:s.message}),te.push("/account/signin"),ve(1)):((0,E.A)({title:v.formatMessage(V.A.emailSent),msg:v.formatMessage(V.A.forgotPasswordLink)}),_()))},[s,ce,l]),(0,r.useEffect)(function(){O&&((0,E.A)({title:v.formatMessage(V.A.error),msg:O.message,type:"warning"}),se(function(e){return Je(Je({},e),{},{showLadda:!1})}),a())},[O]),(0,r.useEffect)(function(){J&&R&&!m&&(Se(),ve(3),se(function(e){return Je(Je({},e),{},{email:J,username:(0,Y.Ay)(J),formSubmitted:!1})}))},[J,R,Y.Ay]);var ke=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;se(function(e){return Je(Je({},e),{},Xe({},t.name,n))})},Ae=function(e){if(ie.formSubmitted){var t= __get$(Q.current,e) ;if(e===ae.D4.COUNTRY||e===ae.D4.SKILL_LEVEL){if(e===ae.D4.COUNTRY)return ie.country&&ie.country.value?"":"error";if(e===ae.D4.SKILL_LEVEL)return ie.skillLevel&&ie.skillLevel.value?"":"error"}return t&&t.validity.valid?"":"error"}return!1},Oe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=d()({"custom-input":!0,error:Ae(t)});return ze("div",{className:"input-wrapper"},void 0,ze(j.A,{type:e,value: __get$(ie,t) ,className:a,placeholder: __get$(V.A,t) ,setRef:function(e){ __set$(Q.current,t,e) },name:t,onChange:ke,minLength:r,label: __get$(V.A,t) ,hasError:Ae,togglePassword:n,showInfo:o,infoMessage:i,required:!0}))},Ee=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=d()({Select:!0,error:Ae(e),dropdrown:!0});return ze("div",{className:"input-wrapper"},void 0,ze("label",{className:Ae(e)?"error":""},void 0,r.createElement(i.sA,t)),ze(C.A,{name:e,field:e,className:c,dropdownOptions:n,onChange:we,options:{searchable:!1,selectValue:o,required:!0,placeholder:v.formatMessage({id:t.id}),labelKey:"name",hasImage:a,hasCountry:s},submitEvent:ie.formSubmitted,minLength:l}))},Pe=function(){se(function(e){return Je(Je({},e),{},{action:ae.SY.forgotPassword,formSubmitted:!1})}),pe(2),te.push("/account/forgotPassword".concat(re))},xe=function(){return ze("div",{className:"signup-fields"},void 0,Oe("text","username"),Oe("password","password",!0,ae.wz),function(){if((0,L.xX)())return null;var e=ie.country;return R?Ee(ae.D4.COUNTRY,V.A.countryRegion,R,e,!1,!0):$e||($e=ze(I.A,{}))}(),Ee(ae.D4.SKILL_LEVEL,V.A.skillLevel,ae.J3,ie.skillLevel,!0))},Le=function(){return ze("div",{className:"signup-fields"},void 0,Oe("email","email"))},Ce=function(){var e=ie.queryParams.confirmation,t=null;return e&&"true"===e?t=V.A.accountConfirmationSuccess:e&&"false"===e&&(t=V.A.accountConfirmationError),r.createElement(r.Fragment,null,Oe("text","emailOrUsername"),Oe("password","password",!0),t?ze(Fe.wy,{},void 0,r.createElement(i.sA,t)):null)},Ie=function(e){if(e.length>0){var t=e.shift(),n= __get$(Q.current,t) ,r=null;t===ae.D4.COUNTRY?r=ie.country.name?null:"missing field":t===ae.D4.SKILL_LEVEL?r=ie.skillLevel.name?null:"missing field":(!n||n&&!n.validity.valid)&&(r=n&&n.value.length>0?"invalid field":"missing field"),null===r?Ie(e):("password"===t?(0,E.A)({title:v.formatMessage(V.A.error),msg:v.formatMessage(V.A.passwordLengthError),type:"warning"}):t===ae.D4.EMAIL&&(0,E.A)({title:v.formatMessage(V.A.error),msg:v.formatMessage(V.A.emailInvalid),type:"warning"}),(0,b.xD)({username:ie.username||null,email:ie.emailOrUsername||ie.email||null,country:{name:ie.country.name||null}},{provider:null,errorFields:t,errorType:r,isSuccessful:!1,signupFields:y()}))}},Me=function(e){var t=x.Ay.getItem(A.DD);if(e.preventDefault(),e.target.checkValidity()){var n={email:ie.email,locale:t};z(n)}else Ie(["email"])},Ue=function(e,t){var n=x.Ay.getItem(A.DD);H({email:t,otp:e,locale:n})},Re=function(){se(function(e){var t=!e.rememberMe;return x.Ay.setItem(ae.$O,t),Je(Je({},e),{},{rememberMe:t})})},Be=function(e){var t=x.Ay.getItem(A.DD),n=JSON.parse(localStorage.getItem(G.gd));e.preventDefault(),se(function(e){return Je(Je({},e),{},{formSubmitted:!0})});var r,o=ie.action;if(e.target.checkValidity()){var i={email:ie.action===ae.SY.signin?ie.emailOrUsername:ie.email,password:ie.password,uuid:(r=x.Ay.getItem(A.Gx),r||(r=(0,u.v4)(),x.Ay.setItem(A.Gx,r),r)),time_zone:(new Intl.DateTimeFormat).resolvedOptions().timeZone};se(function(e){return Je(Je({},e),{},{showLadda:!0})}),o===ae.SY.signin?(ie.rememberMe?x.Ay.setItem(ae.DP,{email:ie.email||ie.emailOrUsername,password:(0,Y.FA)(ie.password)}):x.Ay.removeItem(ae.DP),B(i)):o===ae.SY.signup?(i.country_id=ie.country.value,i.username=ie.username,i.locale=t||"en",i.skill_level=ie.skillLevel.value,i.puzzle_stats={rating:null===n||void 0===n?void 0:n.rating,solved_cnt:null===n||void 0===n?void 0:n.solvedCount,challenge_attempt_cnt:null===n||void 0===n?void 0:n.challengeAttemptCount},D(i,ie.country.name,y()),localStorage.removeItem(G.gd),x.Ay.removeItem(G.Zg),x.Ay.removeItem(ae.vb)):(delete i.password,W(i))}else o===ae.SY.signup&&Ie(["username","email","password","country"])},Ye=(0,r.useMemo)(function(){switch(ge){case 1:return ze(Te,{handleSubmit:Me,showLadda:ie.showLadda,getSignUpFormFields:Le,makeOnSignInSocialUser:$,submitEmailSuccess:f,submitEmailError:p,clearErrors:q});case 2:return ze(Ne.default,{handleSubmit:Ue,showLadda:ie.showLadda,receiverEmail:ie.email,otpVerifiedSuccess:m,otpVerifiedError:g,handleResend:z,clearErrors:Z,resendSuccess:f,resendError:p});case 3:return ze(je,{handleSubmit:Be,showLadda:ie.showLadda,getSignUpFormFields:xe,makeOnSignInSocialUser:$});default:return null}},[ge,ie.showLadda,ie.email,Me,Ue,Be,Le,xe,$,f,p,m,g,z,q,Z]),qe=(0,r.useMemo)(function(){return[{text:V.A.signIn,component:ze(_e,{handleSubmit:Be,showLadda:ie.showLadda,getSignInFormFields:Ce,onForgotPasswordClick:Pe,makeOnSignInSocialUser:$,handleChange:Re,rememberMe:ie.rememberMe,showRememberMe:he})},{text:V.A.signUp,component:Ye},{text:V.A.forgotPassword,component:ze(De,{handleSubmit:Be,showLadda:ie.showLadda,getFormInput:Oe})}]},[Be,ie.showLadda,Ce,xe,Pe,$,Oe,Q]),Ke=(0,r.useCallback)(function(){var e={type:L.EB.GO_OFFLINE};(0,L.nT)(null,JSON.stringify(e))},[L.nT]);return r.createElement(r.Fragment,null,ze(o.mg,{},void 0,ze("title",{},void 0,"".concat(ie.action.toUpperCase()," - Xiangqi.com Chinese Chess")),ie.action===ae.SY.signin&&ze("meta",{name:"description",content:"Sign in to xiangqi.com to continue playing chinese chess and chat with people from around the world.".concat(re&&" After which you will be redirected to: ".concat(re.split("=")[1]))}),ie.action===ae.SY.signup&&ze("meta",{name:"description",content:"Sign up for an account on xiangqi.com to play chinese chess and make friends from all around the world.".concat(re&&" After which you will be redirected to: ".concat(re.split("=")[1]))}),ie.action===ae.SY.forgotPassword&&(Ge||(Ge=ze("meta",{name:"description",content:"Change your password for xiangqi.com chinese chess"})))),ze(Fe.mc,{showGetAppButton:ye},void 0,(0,L.CB)()&&ze("button",{type:"button",className:"offline-btn",onClick:Ke},void 0,ze(N.A,{src:w.Ay.PlayOffline,alt:"hand-icon",className:"hand-pick"})),ye&&ze("div",{className:"mobile-header"},void 0,We||(We=ze(T.A,{size:32,className:"xq-logo"})),ze(F.A,{title:v.formatMessage(V.A.getApp),className:"app-btn",onClick:function(){return(0,P.o3)(K)}})),ze(Fe.Ay,{},void 0,!ye&&(Ve||(Ve=ze(T.A,{}))),ze(M.A,{className:"tabs-wrapper",tabs:qe,selectedTabIndex:de,tabClickHandler:function(e){return function(e){var t=0===e?"signin":"signup";se(function(e){return Je(Je({},e),{},{action:t,formSubmitted:!1})}),pe(e),te.push({pathname:"/account/".concat(t),search:re,state:ne.state}),t===ae.SY.signin?(0,b.UZ)(h.$e,V.A.signIn.value,"left tab on the login/signup page"):t===ae.SY.signup&&(0,b.UZ)(h.l0,V.A.signUp.value,"right tab")}(e)},filteredTabIds:[2]}))))}))},40308(e,t,n){var r;e.exports=(r=n(96540),function(e){function t(r){if( __get$(n,r) )return  __get$(n,r) .exports;var o= __set$(n,r,{exports:{},id:r,loaded:!1}) ;return  __get$(e,r) .call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(8)},function(e,t,n){e.exports=n(6)()},function(e,t){e.exports=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return decodeURIComponent( __call$(e,"replace",[new RegExp("^(?:.*[&\\?]"+__call$(encodeURIComponent(t),"replace",[/[\.\+\*]/g,"\\$&"])+"(?:\\=([^&]*))?)?.*$","i"),"$1"]) )}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n= __get$(arguments,t) ;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&( __set$(e,r,__get$(n,r)) )}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r= __get$(t,n) ;r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),u=r(n(1)),f=r(n(5)),d=r(n(3)),p=function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(e){}return e},m=function(e){function t(){var e,n,r;o(this,t);for(var a=arguments.length,l=Array(a),c=0;c<a;c++) __set$(l,c,__get$(arguments,c)) ;return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isSdkLoaded:!1,isProcessing:!1},r.responseApi=function(e){window.FB.api("/me",{locale:r.props.language,fields:r.props.fields},function(t){s(t,e),r.props.callback(t)})},r.checkLoginState=function(e){r.setStateIfMounted({isProcessing:!1}),e.authResponse?r.responseApi(e.authResponse):r.props.onFailure?r.props.onFailure({status:e.status}):r.props.callback({status:e.status})},r.checkLoginAfterRefresh=function(e){"connected"===e.status?r.checkLoginState(e):window.FB.login(function(e){return r.checkLoginState(e)},!0)},r.click=function(e){if(r.state.isSdkLoaded&&!r.state.isProcessing&&!r.props.isDisabled){r.setState({isProcessing:!0});var t=r.props,n=t.scope,o=t.appId,i=t.onClick,a=t.returnScopes,s=t.responseType,l=t.redirectUri,c=t.disableMobileRedirect,u=t.authType,d=t.state;if("function"!=typeof i||(i(e),!e.defaultPrevented)){var p={client_id:o,redirect_uri:l,state:d,return_scopes:a,scope:n,response_type:s,auth_type:u};if(r.props.isMobile&&!c) __set$(__get$(window,"location"),"href","https://www.facebook.com/dialog/oauth"+(0,f.default)(p)) ;else{if(!window.FB)return void(r.props.onFailure&&r.props.onFailure({status:"facebookNotLoaded"}));window.FB.login(r.checkLoginState,{scope:n,return_scopes:a,auth_type:p.auth_type})}}}},i(r,n)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk"))this.sdkLoaded();else{this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}}},{key:"componentWillReceiveProps",value:function(e){this.state.isSdkLoaded&&e.autoLoad&&!this.props.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,r=t.xfbml,o=t.cookie,i=t.version,a=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v"+i,appId:n,xfbml:r,cookie:o}),e.setStateIfMounted({isSdkLoaded:!0}),(a||e.isRedirectedFromFb())&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var e= __get$(window,"location") .search;return(0,d.default)(e,"code")||(0,d.default)(e,"granted_scopes")}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e=this.props.language;!function(t,n,r){var o=t.getElementsByTagName(n)[0],i=o,a=o;t.getElementById(r)||((a=t.createElement(n)).id=r,a.src="https://connect.facebook.net/"+e+"/sdk.js",i.parentNode.insertBefore(a,i))}(document,"script","facebook-jssdk")}},{key:"render",value:function(){var e=this.props.render;if(!e)throw new Error("ReactFacebookLogin requires a render prop to render");var t={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(t)}}]),t}(c.default.Component);m.propTypes={isDisabled:u.default.bool,callback:u.default.func.isRequired,appId:u.default.string.isRequired,xfbml:u.default.bool,cookie:u.default.bool,authType:u.default.string,scope:u.default.string,state:u.default.string,responseType:u.default.string,returnScopes:u.default.bool,redirectUri:u.default.string,autoLoad:u.default.bool,disableMobileRedirect:u.default.bool,isMobile:u.default.bool,fields:u.default.string,version:u.default.string,language:u.default.string,onClick:u.default.func,onFailure:u.default.func,render:u.default.func.isRequired},m.defaultProps={redirectUri:"undefined"!=typeof window? __get$(__get$(window,"location"),"href") :"/",scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"2.3",language:"en_US",disableMobileRedirect:!1,isMobile:p(),onFailure:null,state:"facebookdirect",responseType:"code"},t.default=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent( __get$(e,t) )}).join("&")}},function(e,t,n){"use strict";function r(){}var o=n(7);e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n= __get$(arguments,t) ;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&( __set$(e,r,__get$(n,r)) )}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r= __get$(t,n) ;r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),u=r(n(1)),f=r(n(9)),d=r(n(4)),p=function(e){return["button","input","select","textarea","optgroup","option","fieldset"].indexOf((e+"").toLowerCase())>=0},m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"style",value:function(){var e=this.constructor.defaultProps.cssClass;return this.props.cssClass===e&&c.default.createElement("style",{dangerouslySetInnerHTML:{__html:f.default}})}},{key:"containerStyle",value:function(e){var t=e.isProcessing,n=e.isSdkLoaded,r=e.isDisabled,o={transition:"opacity 0.5s"};return(t||!n||r)&&(o.opacity=.6),s(o,this.props.containerStyle)}},{key:"renderOwnButton",value:function(e){var t=this.props,n=t.cssClass,r=t.size,o=t.icon,i=t.textButton,a=t.typeButton,l=t.buttonStyle,u=e.onClick,f="string"==typeof o,d={};return e.isDisabled&&p(this.props.tag)&&(d.disabled=!0),c.default.createElement("span",{style:this.containerStyle(e)},f&&c.default.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"}),c.default.createElement(this.props.tag,s({type:a,className:n+" "+r,style:l,onClick:u},d),o&&f&&c.default.createElement("i",{className:"fa "+o}),o&&!f&&o,i),this.style())}},{key:"render",value:function(){var e=this;return c.default.createElement(d.default,s({},this.props,{render:function(t){return e.renderOwnButton(t)}}))}}]),t}(c.default.Component);m.propTypes={textButton:u.default.string,typeButton:u.default.string,size:u.default.string,cssClass:u.default.string,icon:u.default.any,containerStyle:u.default.object,buttonStyle:u.default.object,tag:u.default.oneOfType([u.default.node,u.default.func])},m.defaultProps={textButton:"Login with Facebook",typeButton:"button",size:"metro",fields:"name",cssClass:"kep-login-facebook",tag:"button"},t.default=m},function(e,t,n){(t=e.exports=n(10)()).push([e.id,".kep-login-facebook{font-family:Helvetica,sans-serif;font-weight:700;-webkit-font-smoothing:antialiased;color:#fff;cursor:pointer;display:inline-block;font-size:calc(.27548vw + 12.71074px);text-decoration:none;text-transform:uppercase;transition:background-color .3s,border-color .3s;background-color:#4c69ba;border:calc(.06887vw + .67769px) solid #4c69ba;padding:calc(.34435vw + 13.38843px) calc(.34435vw + 18.38843px)}.kep-login-facebook.small{padding:calc(.34435vw + 3.38843px) calc(.34435vw + 8.38843px)}.kep-login-facebook.medium{padding:calc(.34435vw + 8.38843px) calc(.34435vw + 13.38843px)}.kep-login-facebook.metro{border-radius:0}.kep-login-facebook .fa{margin-right:calc(.34435vw + 3.38843px)}",""]),t.locals={"kep-login-facebook":"kep-login-facebook",small:"small",medium:"medium",metro:"metro",fa:"fa"}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n= __get$(this,t) ;n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i= __get$(this,o) [0];"number"==typeof i&&( __set$(r,i,!0) )}for(o=0;o<t.length;o++){var a= __get$(t,o) ;"number"==typeof a[0]&& __get$(r,a[0]) ||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}]))}}]);
/*hammerhead|script|end*/