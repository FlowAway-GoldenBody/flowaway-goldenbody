/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
var CopilotSearch;(function(n){var t;(function(t){function ti(t){var w,nt,rt,ut,ht,yt,pt,wt,bt,kt,ti,ii;(ni=t.enableComposerForContinuation,ft=t.locStrings.zeroInputSearchBoxAskMeAnything,et=t.locStrings.copilotSearchBoxFollowUp,l=(w=t.enableAttachment)!==null&&w!==void 0?w:!1,ot=t.enableFeedbackShowAfterStreaming,st=t.enableCopyButtonShow,i=_qs(".composer_wrapper textarea"),i)&&(y=_qs(".composer_wrapper"),c=_qs(".composer_wrapper .b_copilot_icon"),r=_qs(".composer_wrapper .b_copilot_send"),s=_d.querySelector("#b_copilot_search .b_copilot_stop_streaming"),h=_d.querySelector("#b_copilot_search .composer_container"),e=(nt=t.isSERPVertical)!==null&&nt!==void 0?nt:!1,b=(rt=t.goToSERP)!==null&&rt!==void 0?rt:!1,o=(ut=t.enableSERPComposerNewTab)!==null&&ut!==void 0?ut:!1,k=(ht=t.serpComposerFormCode)!==null&&ht!==void 0?ht:"",at=t.enableRewardsReportActivity,ct=(yt=t.enableSERPComposerInst)!==null&&yt!==void 0?yt:!1,f=(pt=t.isMiniSERP)!==null&&pt!==void 0?pt:!1,lt=t.query||"",d=(wt=t.enableSideAlignedComposer)!==null&&wt!==void 0?wt:!1,g=(bt=t.enableSERPChat)!==null&&bt!==void 0?bt:!1,vt=(kt=t.fromSerpComposer)!==null&&kt!==void 0?kt:!1,sj_be(i,"keypress",oi),sj_be(i,"change",v),sj_be(i,"cut",v),sj_be(i,"paste",fi),sj_be(i,"focus",dt),sj_be(i,"blur",gt),sj_be(i,"input",v),sj_be(i,"keydown",it),sj_be(i,"textInput",v),sj_be(i,"click",dt),sj_be(r,"click",si),s&&sj_be(s,"click",function(){var t=n.Helper.getLastTurnId(),f={type:"CopilotSearchStreamingStop",data:{turnId:t}},i=n.Helper.getResponseId();CopilotSearchMessager.postMessageToTurn(t,i,f);n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.StopStreamingClick,"responseId",i);tt();ot&&n.TWrap.addFeedbackToTurn();r.disabled=!1;u=!1;n.Conversation.cleanUpTurnSpacing();n.ErrorState.errorHandler(n.ErrorState.ErrorType.STREAMSTOPPED);st&&sj_evt.fire("ShellStopStreaming")}),n.ComposerMenu.init(e,o,k),t.enableModelSwitching&&n.ComposerModelSwitching.init(),sj_evt.bind("csTurnState",function(n){if(n&&n.length>1){var t=n[1];t=="start"?(r.disabled=!0,u=!0):(r.disabled=i.value===""?!0:!1,u=!1)}}),sj_evt.bind("ShellMoreMenu",function(){p=!0}),l&&(sj_evt.bind(n.AttachmentManager.Events.AttachmentAdded,a),sj_evt.bind(n.AttachmentManager.Events.AttachmentRemoved,a)),t.kbZip&&t.showZeroInputPage&&(ti= new URLSearchParams(__get$(window,"location").search) ,ii=ti.get("form")||ti.get("FORM"),ii=="CSSAP5"&&sb_st(function(){a();var t=n.Bridge;t&&t.custom({scenario:"Keyboard",action:"launch"})},100)))}function ii(){return u}function nt(){if(i&&(i.value="",i.setAttribute("rows","1"),gt(),!e&&!f)){s&&tt();var t=n.getMode()===n.Helper.CopilotMode.Zero;t?i.setAttribute("placeholder",ft):i.setAttribute("placeholder",et)}}function a(){setTimeout(function(){i&&i.focus()},0)}function ri(){}function ui(){Lib.CssClass.remove(s,n.Helper.hiddenClassName)}function tt(){Lib.CssClass.add(s,n.Helper.hiddenClassName)}function v(){e&&!ht&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"ComposerInput"),ht=!0);i.value?u||(r.disabled=!1):u||(r.disabled=!0);it()}function it(){sb_st(yt,0)}function fi(){sb_st(function(){i.value= __call$(i.value,"replace",[/[\r\n]+/g," "]) ;u||(r.disabled=!1);yt()},0)}function yt(){var n;if(i){n=1;i.setAttribute("rows",n.toString());var t=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-top").split("px")[0])||12,r=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-bottom").split("px")[0])||12,u=parseInt(window.getComputedStyle(i,null).getPropertyValue("line-height").split("px")[0])||22;n=Math.max(1,Math.ceil((i.scrollHeight-t-r)/u));i.setAttribute("rows",n.toString())}}function pt(){if(!!i.value&&!w.test(i.value)){var t=n.getMode();t==n.Helper.CopilotMode.Zero&&n.ZeroPage.hide();vt&&n.Helper.getLastTurnId()==null&&(n.Helper.writeLog(n.Helper.ClientInst.CopilotSystem,n.Helper.LogNames.ConversationStarted,"convId",n.Helper.getConversationId()),n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.ConversationStart));n.PerformanceHelper.markEvent(n.PerformanceHelper.PerformanceMarkers.TurnStart);n.changeMode(n.Helper.CopilotMode.Turn);n.Conversation.generateCopilotResponse(i.value,n.Helper.InputTypes.Text);t==n.Helper.CopilotMode.Zero&&typeof sj_rra!="undefined"&&at&&ei();l&&n.AttachmentManager.clearAttachmentsData();nt()}}function ei(){var n=new URL(_d.URL);n.searchParams.set("turnindex","1");sj_rra(n.toString())}function oi(t){if(!t.shiftKey&&t.key==="Enter"){if(t.preventDefault(),u)return;if(!g&&(e||f)){if(!!i.value&&!w.test(i.value)){var r=i.value.trim();n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"ComposerSubmit","query",r);b?wt(r):bt(r)}return}pt()}}function si(t){if(t.preventDefault(),!u){if(!g&&(e||f)){if(!!i.value&&!w.test(i.value)){var r=i.value.trim();n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,"ComposerSubmit","query",r);b?wt(r):bt(r)}return}pt()}}function wt(n){var i=_ge("sb_form_q"),r=_ge("sb_form"),t,u;!o&&i&&r?(i.value=n,t=_ge("sb_form_go"),t?t.click():r.submit()):(u= __get$(window,"location") .origin+"/search?q="+n+"&FORM=QBRE",window.open(u,o?"_blank":"_self"))}function bt(n){var i= __get$(window,"location") .origin+"/copilotsearch?q="+n+"&pq="+hi()+"&FORM="+k,t;f&&(i+="&webcoms=1");nt();ct?(t=_ge("b_bop_cs_inst"),t&&typeof si_ct=="function"?( __set$(t,"href",i) ,t.target=o?"_blank":"_self",window.si_ct(t),t.click()):kt(i)):kt(i)}function kt(n){o||f?window.open(n,"_blank"): __set$(__get$(window,"location"),"href",n) }function hi(){if(f)return lt;var t= new URLSearchParams(__get$(window,"location").search) ,n=t.get("q");return n?n.trim():""}function dt(){Lib.CssClass.add(y,rt);c&&c.classList.add("hidden");r.classList.remove("hidden");u||(r.disabled=i.value===""?!0:!1);it()}function gt(){i.value===""&&sb_st(function(){if(p){p=!1;return}r.classList.add("hidden");l&&n.AttachmentManager.hasAttachment()||(Lib.CssClass.remove(y,rt),c&&c.classList.remove("hidden"));i.blur()},100)}function ci(){h&&d&&Lib.CssClass.add(h,ut)}function li(){h&&d&&Lib.CssClass.remove(h,ut)}var y,i,ni=!1,u=!1,p=!1,w=/^\s*$/,rt="focusmode",ut="composer_side_aligned",ft,et,l=!1,ot=!1,st=!1,e=!1,b=!1,o=!1,k="",ht=!1,ct=!1,f=!1,lt="",h,c,r,s,at=!1,d=!1,g=!1,vt=!1;t.initComposer=ti;t.getShouldDisableSubmit=ii;t.resetComposer=nt;t.focus=a;t.onUpdate=ri;t.showStopStreamingButton=ui;t.hideStopStreamingButton=tt;t.showSideAlignComposer=ci;t.hideSideAlignComposer=li})(t=n.Composer||(n.Composer={}))})(CopilotSearch||(CopilotSearch={}))
/*hammerhead|script|end*/