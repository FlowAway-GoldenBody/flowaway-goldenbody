/*hammerhead|script|start*/if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
import{r as n,x as D,j as e,a4 as I,a as w,t as A,M as Y,e as y,U as C,B as O,F as T,D as L,c as G,S as Z,V as H,ad as K,a6 as Q,a7 as X,d as b}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/index-C2mh4mqb.js" ;import{o as W}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/mobxreact.esm-DjUY3_cD.js" ;import{a as _,C as ee,i as v}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/ContinueButton-CU5W5uRR.js" ;import{E as te}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/ErrorMessage-DPKMnG9C.js" ;import{I as oe}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/index-DtRk3C_W.js" ;import{s as ne}from "https://beside-powerful-above-recordings.trycloudflare.com:443/ee653e9a2e3e47a7a892ab8d7b4d83c8!s!utf-8/https://www.gimkit.com/assets/index-UKi0U4nB.js" ;function se(t={}){ const _hh$temp0=t,a=_hh$temp0.onScriptLoadSuccess,i=_hh$temp0.onScriptLoadError,_hh$temp1=__arrayFrom$(n.useState(!1)),l=_hh$temp1[0],u=_hh$temp1[1],g=n.useRef(a); g.current=a;const m=n.useRef(i);return m.current=i,n.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",d.async=!0,d.defer=!0,d.onload=()=>{var c;u(!0),(c=g.current)===null||c===void 0||c.call(g)},d.onerror=()=>{var c;u(!1),(c=m.current)===null||c===void 0||c.call(m)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[]),l}const z=n.createContext(null);function ie( _hh$temp2 ){ var t=_hh$temp2.clientId,a=_hh$temp2.onScriptLoadSuccess,i=_hh$temp2.onScriptLoadError,l=_hh$temp2.children; const u=se({onScriptLoadSuccess:a,onScriptLoadError:i}),g=n.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:u}),[t,u]);return D.createElement(z.Provider,{value:g},l)}function re(){const t=n.useContext(z);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function ae( _hh$temp3 ){ var _hh$temp3$flow=_hh$temp3.flow,t=_hh$temp3$flow===void 0?"implicit":_hh$temp3$flow,_hh$temp3$scope=_hh$temp3.scope,a=_hh$temp3$scope===void 0?"":_hh$temp3$scope,i=_hh$temp3.onSuccess,l=_hh$temp3.onError,u=__rest$Object(_hh$temp3,["flow","scope","onSuccess","onError"]);  const _hh$temp4=re(),g=_hh$temp4.clientId,m=_hh$temp4.scriptLoadedSuccessfully,d=n.useRef(),c=n.useRef(i); c.current=i;const h=n.useRef(l);h.current=l,n.useEffect(()=>{var o;if(!m)return;const f=t==="implicit"?"initTokenClient":"initCodeClient",x=(o=window.google)===null||o===void 0?void 0: __call$(o.accounts.oauth2,f,[{client_id:g,scope:`openid profile email ${a}`,callback:k=>{var s,p;if(k.error)return(s=h.current)===null||s===void 0?void 0:s.call(h,k);(p=c.current)===null||p===void 0||p.call(c,k);},...u}]) ;d.current=x},[g,m,t,a]);const E=n.useCallback(o=>d.current.requestAccessToken(o),[]),S=n.useCallback(()=>d.current.requestCode(),[]);return t==="implicit"?E:S}const le=W(()=>{ const _hh$temp5=n.useContext(_),t=_hh$temp5.navigation; return t.loginError?e.jsx(I,{style:{marginTop:5},message:t.loginError&&t.loginError.message&&t.loginError.message.text?t.loginError.message.text:"Error logging in. Please try again.",type:"error",showIcon:!0}):null}),ce=()=>e.jsx("div",{style:{height:150},className:"maxWidth flex hc vc",children:e.jsx(Z,{size:"large"})}),de=t=>{ const _hh$temp6=__arrayFrom$(n.useState([])),a=_hh$temp6[0],i=_hh$temp6[1],_hh$temp7=__arrayFrom$(n.useState(!1)),l=_hh$temp7[0],u=_hh$temp7[1],_hh$temp8=__arrayFrom$(n.useState(!1)),g=_hh$temp8[0],m=_hh$temp8[1],_hh$temp9=__arrayFrom$(n.useState(!1)),d=_hh$temp9[0],c=_hh$temp9[1],_hh$temp10=__arrayFrom$(n.useState(!1)),h=_hh$temp10[0],E=_hh$temp10[1],_hh$temp11=__arrayFrom$(n.useState("")),S=_hh$temp11[0],o=_hh$temp11[1]; n.useEffect(()=>{t.open?(m(!0),w({url:"/api/users/password-reset-options",method:"post",data:{email:t.defaultEmail},success:s=>{s.passwordless&&u(s.passwordless),s.others&&s.others.length?i(s.others):x()},error:s=>{A({e:s,default:{title:"We ran into an error..."},onOk:()=> __get$(window,"location") .reload()})},both:()=>{m(!1)}})):(i([]),u(!1),m(!1),c(!1),E(!1),o(""))},[t.open]);const f=(s,p)=>{d||(c(!0),w({url:"/api/users/requestPasswordReset",method:"post",data:{email:t.defaultEmail,target:s},success:()=>{o(p),E(!0),c(!1)},error:N=>{A({e:N,default:{title:"Error sending reset link"},onOk:()=> __get$(window,"location") .reload()})}}))},x=()=>f(),k=()=>g||d?e.jsx(ce,{}):h?e.jsxs("div",{className:"flex flex-column maxWidth vc hc",children:[e.jsx("div",{children:e.jsx("i",{className:"fas fa-check-circle",style:{fontSize:75,marginBottom:15,color:"#2e7d32"}})}),e.jsx("div",{style:{fontSize:22,textAlign:"center"},children:S?`We just sent ${l?"an add password link":"a password reset link"} to ${S}. Ask them for the link and you should be good to go!`:`We just sent ${l?"an add password link":"a password reset link"} to your email. Open that link and you should be good to go!`})]}):a.length?e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:23,fontWeight:T.Bold,textAlign:"center",marginTop:15,marginBottom:5},children:["Where should we send the link to"," ",l?"add a password":"reset your password","?"]}),e.jsx("div",{style:{fontSize:17,textAlign:"center",color:"rgba(0,0,0,0.7)"},children:"If your school doesn't allow you to receive emails, select one of your teachers and they can give the link to you."}),e.jsx(L,{}),e.jsx(G,{style:{color:y.Black,fontFamily:C.SFPro,marginBottom:10},onClick:x,hoverable:!0,children:"Me"}),a.map(s=>e.jsx(G,{style:{color:y.Black,fontFamily:C.SFPro,marginBottom:10},hoverable:!0,onClick:()=>f(s.id,s.name),children:s.name},`reset-${s.id}`))]}):null;return e.jsx(Y,{style:{fontFamily:C.SFPro,color:y.Black},footer:[e.jsx(O,{onClick:t.close,children:"Close"},1)],closable:!1,width:700,open:t.open,children:k()})},M=t=>e.jsx(O,{style:{padding:"10px 20px",height:"auto"},disabled:!t.onClick,onClick:t.onClick,children:e.jsxs("div",{style:{fontFamily:C.SFPro,color:"rgba(0,0,0,0.75)"},className:"flex vc",children:[e.jsx("img",{src:"/client/img/signup/google.svg",alt:"Google Logo",style:{height:18,marginRight:11}}),e.jsxs("div",{children:[t.text," with Google"]})]})}),ue=t=>{const a=ae({onSuccess:i=>{t.onToken(i.code)},onError:i=>{t.onError(i)},flow:"auth-code"});return e.jsx(e.Fragment,{children:e.jsx(M,{text:t.text,onClick:a})})},ge=t=>new Promise((a,i)=>{w({url:"/api/users/google-auth-details",data:{jwt:t},success:l=>{a(l)},error:l=>{i(l)}})}),me=t=>{var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(String(t).toLowerCase())},ye=W(()=>{ const _hh$temp12=__arrayFrom$(n.useState(!1)),t=_hh$temp12[0],a=_hh$temp12[1],_hh$temp13=__arrayFrom$(n.useState(!1)),i=_hh$temp13[0],l=_hh$temp13[1],_hh$temp14=__arrayFrom$(n.useState("")),u=_hh$temp14[0],g=_hh$temp14[1],_hh$temp15=__arrayFrom$(n.useState(!1)),m=_hh$temp15[0],d=_hh$temp15[1],_hh$temp16=__arrayFrom$(n.useState(null)),c=_hh$temp16[0],h=_hh$temp16[1],_hh$temp17=__arrayFrom$(n.useState(!1)),E=_hh$temp17[0],S=_hh$temp17[1],_hh$temp18=n.useContext(_),o=_hh$temp18.login,f=_hh$temp18.navigation,_hh$temp19=f,x=_hh$temp19.emailSignInBlocked; n.useEffect(()=>{w({url:"/api/users/google-token",success:r=>{r&&r.token&&g(r.token)}})},[]);const k=r=>{if(h(null),i)return;const j=r.target.value||"";o.email=j,a(me(j))},s=()=>{t&&B()},p=()=>{ __call$(o.informationNeeded,"replace",[o.informationNeeded.filter(r=>r!==v.email)]) },N=()=>{ __call$(o.informationNeeded,"replace",[[...o.informationNeeded,v.accountType]]) ,o.firstName|| __call$(o.informationNeeded,"replace",[[...o.informationNeeded,v.firstName]]) ,o.lastName|| __call$(o.informationNeeded,"replace",[[...o.informationNeeded,v.lastName]]) ,p()},B=()=>{i||(h(null),l(!0),S(!1),w({url:"/api/users/register/email-info",method:"post",data:{email:o.email},success:r=>{if(l(!1), __get$(window,"location") .pathname.includes("login")&&!r.accountExists){o.googleToken="",S(!0);return}if(r.accountExists){if(o.userExists=!0,!o.googleToken){if(r.noPassword){f.emailSignInBlocked=!0;return} __call$(o.informationNeeded,"replace",[[...o.informationNeeded,v.password]]) }p()}else p(),N()},error:r=>{l(!1),h(r)}}))},V=r=>{ const _hh$temp20=r,j=_hh$temp20.firstName,q=_hh$temp20.lastName,P=_hh$temp20.email,U=_hh$temp20.emailVerified,R=_hh$temp20.userToken; P&&(U&&R&&(o.googleToken=R),o.email=P,o.firstName=j,o.lastName=q,B())},F=()=>{ne.error("Error with Google Authentication. Please try again.")},$=r=>{ge(r).then(j=>{V(j)}).catch(j=>{F()})},J=()=>{const r=f.classJoiningName?"Join":"Continue";return e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{style:{fontWeight:T.Bold,color:y.Black,fontSize:19,marginBottom:11},children:["Authenticate with Google to"," ",f.classJoiningName?"join":"login"]}),u?e.jsx(ie,{clientId:u,children:e.jsx(ue,{text:r,onToken:$,onError:F})}):e.jsx(M,{text:r}),x?e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx("a",{onClick:()=>d(!0),children:"or add a password..."}),e.jsx(de,{defaultEmail:o.email,open:m,close:()=>d(!1)})]}):null,x?null:e.jsx("div",{className:"maxWidth",children:e.jsx(L,{children:"or"})}),!x&&e.jsx(e.Fragment,{children:e.jsxs(he,{children:[e.jsxs(xe,{children:[f.classJoiningName?"Join":"Continue"," with email..."]}),e.jsx(oe,{onChange:k,size:"large",placeholder:"Email address...",onPressEnter:s,maxLength:256}),e.jsx(ee,{disabled:!t,style:{marginTop:5},onClick:s,loading:i,children:"Continue"})]})}),!c&&E?e.jsx(I,{type:"warning",style:{marginTop:10},message:e.jsxs("div",{children:["No account found."," ",H("blockRedirect")?null:e.jsxs(e.Fragment,{children:["Click here to ",e.jsx("a",{href:K,children:"sign up."})]})]})}):null,e.jsx(te,{error:c,style:{marginTop:10}}),e.jsx(le,{}),f.classJoiningName?e.jsxs("div",{style:{marginTop:25},children:["By joining, you agree to our"," ",e.jsx("a",{href:Q,target:"_blank",children:"Privacy Policy"})," ","and"," ",e.jsx("a",{href:X,target:"_blank",children:"Terms Of Service"}),"."]}):null]})};return e.jsx(fe,{children:J()})}),fe=b.div`
  display: flex;
  align-items: center;
  flex-direction: column;
  width: 100%;
`,he=b.div`
  width: 100%;
  color: ${y.Black};
`,xe=b.div`
  font-size: 18px;
  font-weight: ${T.Bold};
`;export{ye as E,de as F,le as L,me as v};

/*hammerhead|script|end*/